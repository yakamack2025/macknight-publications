import{A as le,B as na,D as hi,E as ra,F as ia,G as sa,H as ye,I as di,J as C,K as k,L as Kn,V as D,Z as oa,a as oi,b as ai,c as qe,ca as aa,d as E,da as ca,e as en,ea as ua,fa as fi,g as Yo,h as Jo,ha as la,i as ci,j as ui,k as li,ka as ha,l as Xo,la as da,ma as fa,n as Zo,o as wt,oa as pa,p as Re,pa as ma,q as Tt,qa as ga,r as ea,ra as _a,s as Wn,sa as ya,ta as va,x as $e,y as ta,z as Gn}from"./chunk-RU7CILXK.js";var Ia=()=>{};var Ta=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Ol=function(n){let e=[],t=0,i=0;for(;t<n.length;){let s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){let c=n[t++];e[i++]=String.fromCharCode((s&31)<<6|c&63)}else if(s>239&&s<365){let c=n[t++],l=n[t++],f=n[t++],g=((s&7)<<18|(c&63)<<12|(l&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{let c=n[t++],l=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(c&63)<<6|l&63)}}return e.join("")},Hn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){let c=n[s],l=s+1<n.length,f=l?n[s+1]:0,g=s+2<n.length,T=g?n[s+2]:0,S=c>>2,P=(c&3)<<4|f>>4,A=(f&15)<<2|T>>6,N=T&63;g||(N=64,l||(A=64)),i.push(t[S],t[P],t[A],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ta(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ol(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){let c=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;let T=s<n.length?t[n.charAt(s)]:64;++s;let P=s<n.length?t[n.charAt(s)]:64;if(++s,c==null||f==null||T==null||P==null)throw new mi;let A=c<<2|f>>4;if(i.push(A),T!==64){let N=f<<4&240|T>>2;if(i.push(N),P!==64){let O=T<<6&192|P;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},mi=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},xl=function(n){let e=Ta(n);return Hn.encodeByteArray(e,!0)},nn=function(n){return xl(n).replace(/\./g,"")},Qn=function(n){try{return Hn.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Vl=()=>_i().__FIREBASE_DEFAULTS__,Ml=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ll=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Qn(n[1]);return e&&JSON.parse(e)},yi=()=>{try{return Ia()||Vl()||Ml()||Ll()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vi=n=>{var e,t;return(t=(e=yi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Aa=n=>{let e=vi(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ii=()=>{var n;return(n=yi())===null||n===void 0?void 0:n.config},Ei=n=>{var e;return(e=yi())===null||e===void 0?void 0:e[`_${n}`]};var it=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function st(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Yn(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function ba(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nn(JSON.stringify(t)),nn(JSON.stringify(l)),""].join(".")}var tn={};function Fl(){let n={prod:[],emulator:[]};for(let e of Object.keys(tn))tn[e]?n.emulator.push(e):n.prod.push(e);return n}function Ul(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Ea=!1;function Jn(n,e){if(typeof window>"u"||typeof document>"u"||!st(window.location.host)||tn[n]===e||tn[n]||Ea)return;tn[n]=e;function t(A){return`__firebase__banner__${A}`}let i="__firebase__banner",c=Fl().prod.length>0;function l(){let A=document.getElementById(i);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,N){A.setAttribute("width","24"),A.setAttribute("id",N),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function T(){let A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Ea=!0,l()},A}function S(A,N){A.setAttribute("id",N),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function P(){let A=Ul(i),N=t("text"),O=document.getElementById(N)||document.createElement("span"),$=t("learnmore"),U=document.getElementById($)||document.createElement("a"),ue=t("preprendIcon"),K=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){let W=A.element;f(W),S(U,$);let oe=T();g(K,ue),W.append(K,O,U,oe),document.body.appendChild(W)}c?(O.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",P):P()}function Q(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Sa(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function Pa(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ra(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Ca(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ka(){let n=Q();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rn(){try{return typeof indexedDB=="object"}catch{return!1}}function Da(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var c;e(((c=s.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}var Bl="FirebaseError",ce=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Bl,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}},pe=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},s=`${this.service}/${e}`,c=this.errors[e],l=c?ql(c,i):"Error",f=`${this.serviceName}: ${l} (${s}).`;return new ce(s,f,i)}};function ql(n,e){return n.replace($l,(t,i)=>{let s=e[i];return s!=null?String(s):`<${i}?>`})}var $l=/\{\$([^}]+)}/g;function Na(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ve(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let s of t){if(!i.includes(s))return!1;let c=n[s],l=e[s];if(wa(c)&&wa(l)){if(!ve(c,l))return!1}else if(c!==l)return!1}for(let s of i)if(!t.includes(s))return!1;return!0}function wa(n){return n!==null&&typeof n=="object"}function sn(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Oa(n,e){let t=new gi(n,e);return t.subscribe.bind(t)}var gi=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jl(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=pi),s.error===void 0&&(s.error=pi),s.complete===void 0&&(s.complete=pi);let c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jl(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pi(){}var Km=14400*1e3;function Ce(n){return n&&n._delegate?n._delegate:n}var re=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ot="[DEFAULT]";var wi=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new it;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Wl(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let s=this.normalizeInstanceIdentifier(t);try{let c=this.getOrInitializeService({instanceIdentifier:s});i.resolve(c)}catch{}}}}clearInstance(e=ot){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ot){return this.instances.has(e)}getOptions(e=ot){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[c,l]of this.instancesDeferred.entries()){let f=this.normalizeInstanceIdentifier(c);i===f&&l.resolve(s)}return s}onInit(e,t){var i;let s=this.normalizeInstanceIdentifier(t),c=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(s,c);let l=this.instances.get(s);return l&&e(l,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:zl(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ot){return this.component?this.component.multipleInstances?e:ot:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function zl(n){return n===ot?void 0:n}function Wl(n){return n.instantiationMode==="EAGER"}var Xn=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new wi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Gl=[],F=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(F||{}),Kl={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},Hl=F.INFO,Ql={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},Yl=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),s=Ql[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ie=class{constructor(e){this.name=e,this._logLevel=Hl,this._logHandler=Yl,this._userLogHandler=null,Gl.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Kl[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}};var Jl=(n,e)=>e.some(t=>n instanceof t),xa,Va;function Xl(){return xa||(xa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zl(){return Va||(Va=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ma=new WeakMap,Ai=new WeakMap,La=new WeakMap,Ti=new WeakMap,Si=new WeakMap;function eh(n){let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("success",c),n.removeEventListener("error",l)},c=()=>{t(Ee(n.result)),s()},l=()=>{i(n.error),s()};n.addEventListener("success",c),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Ma.set(t,n)}).catch(()=>{}),Si.set(e,n),e}function th(n){if(Ai.has(n))return;let e=new Promise((t,i)=>{let s=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",l),n.removeEventListener("abort",l)},c=()=>{t(),s()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",c),n.addEventListener("error",l),n.addEventListener("abort",l)});Ai.set(n,e)}var bi={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ai.get(n);if(e==="objectStoreNames")return n.objectStoreNames||La.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ee(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Fa(n){bi=n(bi)}function nh(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Zn(this),e,...t);return La.set(i,e.sort?e.sort():[e]),Ee(i)}:Zl().includes(n)?function(...e){return n.apply(Zn(this),e),Ee(Ma.get(this))}:function(...e){return Ee(n.apply(Zn(this),e))}}function rh(n){return typeof n=="function"?nh(n):(n instanceof IDBTransaction&&th(n),Jl(n,Xl())?new Proxy(n,bi):n)}function Ee(n){if(n instanceof IDBRequest)return eh(n);if(Ti.has(n))return Ti.get(n);let e=rh(n);return e!==n&&(Ti.set(n,e),Si.set(e,n)),e}var Zn=n=>Si.get(n);function Ba(n,e,{blocked:t,upgrade:i,blocking:s,terminated:c}={}){let l=indexedDB.open(n,e),f=Ee(l);return i&&l.addEventListener("upgradeneeded",g=>{i(Ee(l.result),g.oldVersion,g.newVersion,Ee(l.transaction),g)}),t&&l.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{c&&g.addEventListener("close",()=>c()),s&&g.addEventListener("versionchange",T=>s(T.oldVersion,T.newVersion,T))}).catch(()=>{}),f}var ih=["get","getKey","getAll","getAllKeys","count"],sh=["put","add","delete","clear"],Pi=new Map;function Ua(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Pi.get(e))return Pi.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,s=sh.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||ih.includes(t)))return;let c=function(l,...f){return E(this,null,function*(){let g=this.transaction(l,s?"readwrite":"readonly"),T=g.store;return i&&(T=T.index(f.shift())),(yield Promise.all([T[t](...f),s&&g.done]))[0]})};return Pi.set(e,c),c}Fa(n=>ai(oi({},n),{get:(e,t,i)=>Ua(e,t)||n.get(e,t,i),has:(e,t)=>!!Ua(e,t)||n.has(e,t)}));var Ci=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oh(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function oh(n){let e=n.getComponent();return e?.type==="VERSION"}var ki="@firebase/app",qa="0.13.2";var ke=new Ie("@firebase/app"),ah="@firebase/app-compat",ch="@firebase/analytics-compat",uh="@firebase/analytics",lh="@firebase/app-check-compat",hh="@firebase/app-check",dh="@firebase/auth",fh="@firebase/auth-compat",ph="@firebase/database",mh="@firebase/data-connect",gh="@firebase/database-compat",_h="@firebase/functions",yh="@firebase/functions-compat",vh="@firebase/installations",Ih="@firebase/installations-compat",Eh="@firebase/messaging",wh="@firebase/messaging-compat",Th="@firebase/performance",Ah="@firebase/performance-compat",bh="@firebase/remote-config",Sh="@firebase/remote-config-compat",Ph="@firebase/storage",Rh="@firebase/storage-compat",Ch="@firebase/firestore",kh="@firebase/ai",Dh="@firebase/firestore-compat",Nh="firebase",Oh="11.10.0";var Di="[DEFAULT]",xh={[ki]:"fire-core",[ah]:"fire-core-compat",[uh]:"fire-analytics",[ch]:"fire-analytics-compat",[hh]:"fire-app-check",[lh]:"fire-app-check-compat",[dh]:"fire-auth",[fh]:"fire-auth-compat",[ph]:"fire-rtdb",[mh]:"fire-data-connect",[gh]:"fire-rtdb-compat",[_h]:"fire-fn",[yh]:"fire-fn-compat",[vh]:"fire-iid",[Ih]:"fire-iid-compat",[Eh]:"fire-fcm",[wh]:"fire-fcm-compat",[Th]:"fire-perf",[Ah]:"fire-perf-compat",[bh]:"fire-rc",[Sh]:"fire-rc-compat",[Ph]:"fire-gcs",[Rh]:"fire-gcs-compat",[Ch]:"fire-fst",[Dh]:"fire-fst-compat",[kh]:"fire-vertex","fire-js":"fire-js",[Nh]:"fire-js-all"};var on=new Map,Vh=new Map,Ni=new Map;function $a(n,e){try{n.container.addComponent(e)}catch(t){ke.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function me(n){let e=n.name;if(Ni.has(e))return ke.debug(`There were multiple attempts to register component ${e}.`),!1;Ni.set(e,n);for(let t of on.values())$a(t,n);for(let t of Vh.values())$a(t,n);return!0}function At(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function he(n){return n==null?!1:n.settings!==void 0}var Mh={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},je=new pe("app","Firebase",Mh);var Oi=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new re("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw je.create("app-deleted",{appName:this._name})}};var ze=Oh;function Mi(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Di,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw je.create("bad-app-name",{appName:String(s)});if(t||(t=Ii()),!t)throw je.create("no-options");let c=on.get(s);if(c){if(ve(t,c.options)&&ve(i,c.config))return c;throw je.create("duplicate-app",{appName:s})}let l=new Xn(s);for(let g of Ni.values())l.addComponent(g);let f=new Oi(t,i,l);return on.set(s,f),f}function at(n=Di){let e=on.get(n);if(!e&&n===Di&&Ii())return Mi();if(!e)throw je.create("no-app",{appName:n});return e}function er(){return Array.from(on.values())}function z(n,e,t){var i;let s=(i=xh[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);let c=s.match(/\s|\//),l=e.match(/\s|\//);if(c||l){let f=[`Unable to register library "${s}" with version "${e}":`];c&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ke.warn(f.join(" "));return}me(new re(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}var Lh="firebase-heartbeat-database",Fh=1,an="firebase-heartbeat-store",Ri=null;function Ga(){return Ri||(Ri=Ba(Lh,Fh,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(an)}catch(t){console.warn(t)}}}}).catch(n=>{throw je.create("idb-open",{originalErrorMessage:n.message})})),Ri}function Uh(n){return E(this,null,function*(){try{let t=(yield Ga()).transaction(an),i=yield t.objectStore(an).get(Ka(n));return yield t.done,i}catch(e){if(e instanceof ce)ke.warn(e.message);else{let t=je.create("idb-get",{originalErrorMessage:e?.message});ke.warn(t.message)}}})}function ja(n,e){return E(this,null,function*(){try{let i=(yield Ga()).transaction(an,"readwrite");yield i.objectStore(an).put(e,Ka(n)),yield i.done}catch(t){if(t instanceof ce)ke.warn(t.message);else{let i=je.create("idb-set",{originalErrorMessage:t?.message});ke.warn(i.message)}}})}function Ka(n){return`${n.name}!${n.options.appId}`}var Bh=1024,qh=30,xi=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Vi(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=za();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:s}),this._heartbeatsCache.heartbeats.length>qh){let l=jh(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ke.warn(i)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=za(),{heartbeatsToSend:i,unsentEntries:s}=$h(this._heartbeatsCache.heartbeats),c=nn(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ke.warn(t),""}})}};function za(){return new Date().toISOString().substring(0,10)}function $h(n,e=Bh){let t=[],i=n.slice();for(let s of n){let c=t.find(l=>l.agent===s.agent);if(c){if(c.dates.push(s.date),Wa(t)>e){c.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Wa(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Vi=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return rn()?Da().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Uh(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return ja(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let s=yield this.read();return ja(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return})}};function Wa(n){return nn(JSON.stringify({version:2,heartbeats:n})).length}function jh(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function zh(n){me(new re("platform-logger",e=>new Ci(e),"PRIVATE")),me(new re("heartbeat",e=>new xi(e),"PRIVATE")),z(ki,qa,n),z(ki,qa,"esm2017"),z("fire-js","")}zh("");var Wh="firebase",Gh="11.10.0";z(Wh,Gh,"app");function Ha(n){n===void 0&&(n=Re($e));let e=n.get(Gn);return t=>new en(i=>{let s=e.add(),c=!1;function l(){c||(s(),c=!0)}let f=t.subscribe({next:g=>{i.next(g),l()},complete:()=>{i.complete(),l()},error:g=>{i.error(g),l()}});return f.add(()=>{i.unsubscribe(),l()}),f})}var We=new ca("ANGULARFIRE2_VERSION");function cn(n,e,t){if(e){if(e.length===1)return e[0];let c=e.filter(l=>l.app===t);if(c.length===1)return c[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var St=(n,e)=>{let t=e?[e]:er(),i=[];return t.forEach(s=>{s.container.getProvider(n).instances.forEach(l=>{i.includes(l)||i.push(l)})}),i},bt=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(bt||{}),Qa=fi()&&typeof Zone<"u"?bt.WARN:bt.SILENT;var tr=class{zone;delegate;constructor(e,t=Jo){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let s=this.zone,c=function(l){s?s.runGuarded(()=>{e.apply(this,[l])}):e.apply(this,[l])};return this.delegate.schedule(c,t,i)}},Ge=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=Re(ye);this.outsideAngular=t.runOutsideAngular(()=>new tr(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new tr(typeof Zone>"u"?void 0:Zone.current,Yo))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Zo({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ya=!1;function Hh(n,e){!Ya&&(Qa>bt.SILENT||fi())&&(Ya=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),Qa>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Qh(n){let e=Re(ye,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ct(n){let e=Re(ye,{optional:!0});return e?e.run(()=>n()):n()}var Yh=(n,e,t)=>(...i)=>(e&&setTimeout(e,0),Wn(t,()=>ct(()=>n.apply(void 0,i)))),ut=(n,e,t)=>(t||=e?bt.WARN:bt.VERBOSE,function(){let i,s=arguments,c,l,f;try{c=Re(Ge),l=Re(Gn),f=Re(ea)}catch{return Hh(n,t),n.apply(this,s)}for(let T=0;T<arguments.length;T++)typeof s[T]=="function"&&(e&&(i||=ct(()=>l.add())),s[T]=Yh(s[T],i,f));let g=Qh(()=>n.apply(this,s));return e?g instanceof en?g.pipe(li(c.outsideAngular),ui(c.insideAngular),Ha(f)):g instanceof Promise?ct(()=>{let T=l.add();return new Promise((S,P)=>{g.then(A=>Wn(f,()=>ct(()=>S(A))),A=>Wn(f,()=>ct(()=>P(A)))).finally(T)})}):typeof g=="function"&&i?function(){return setTimeout(i,0),g.apply(this,arguments)}:ct(()=>g):g instanceof en?g.pipe(li(c.outsideAngular),ui(c.insideAngular)):ct(()=>g)});var De=class{constructor(e){return e}},lt=class{constructor(){return er()}};function Jh(n){return n&&n.length===1?n[0]:new De(at())}var Li=new wt("angularfire2._apps"),Xh={provide:De,useFactory:Jh,deps:[[new le,Li]]},Zh={provide:lt,deps:[[new le,Li]]};function ed(n){return(e,t)=>{let i=t.get(na);z("angularfire",We.full,"core"),z("angularfire",We.full,"app"),z("angular",ua.full,i.toString());let s=e.runOutsideAngular(()=>n(t));return new De(s)}}function Ja(n,...e){return Tt([Xh,Zh,{provide:Li,useFactory:ed(n),multi:!0,deps:[ye,$e,Ge,...e]}])}var Xa=ut(Mi,!0);var td=new Map,nd={activated:!1,tokenObservers:[]},rd={initialized:!1,enabled:!1};function ge(n){return td.get(n)||Object.assign({},nd)}function nc(){return rd}var id="https://content-firebaseappcheck.googleapis.com/v1";var sd="exchangeDebugToken",Za={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Zg=1440*60*1e3;var Bi=class{constructor(e,t,i,s,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=s,s>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new it,this.pending.promise.catch(t=>{}),yield od(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new it,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function od(n){return new Promise(e=>{setTimeout(e,n)})}var ad={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ke=new pe("appCheck","AppCheck",ad);function rc(n){if(!ge(n).activated)throw Ke.create("use-before-activation",{appName:n.name})}function ic(i,s){return E(this,arguments,function*({url:n,body:e},t){let c={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){let N=yield l.getHeartbeatsHeader();N&&(c["X-Firebase-Client"]=N)}let f={method:"POST",body:JSON.stringify(e),headers:c},g;try{g=yield fetch(n,f)}catch(N){throw Ke.create("fetch-network-error",{originalErrorMessage:N?.message})}if(g.status!==200)throw Ke.create("fetch-status-error",{httpStatus:g.status});let T;try{T=yield g.json()}catch(N){throw Ke.create("fetch-parse-error",{originalErrorMessage:N?.message})}let S=T.ttl.match(/^([\d.]+)(s)$/);if(!S||!S[2]||isNaN(Number(S[1])))throw Ke.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${T.ttl}`});let P=Number(S[1])*1e3,A=Date.now();return{token:T.token,expireTimeMillis:A+P,issuedAtTimeMillis:A}})}function sc(n,e){let{projectId:t,appId:i,apiKey:s}=n.options;return{url:`${id}/projects/${t}/apps/${i}:${sd}?key=${s}`,body:{debug_token:e}}}var cd="firebase-app-check-database",ud=1,qi="firebase-app-check-store";var nr=null;function ld(){return nr||(nr=new Promise((n,e)=>{try{let t=indexedDB.open(cd,ud);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var s;e(Ke.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},t.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(qi,{keyPath:"compositeKey"})}}}catch(t){e(Ke.create("storage-open",{originalErrorMessage:t?.message}))}}),nr)}function hd(n,e){return dd(fd(n),e)}function dd(n,e){return E(this,null,function*(){let i=(yield ld()).transaction(qi,"readwrite"),c=i.objectStore(qi).put({compositeKey:n,value:e});return new Promise((l,f)=>{c.onsuccess=g=>{l()},i.onerror=g=>{var T;f(Ke.create("storage-set",{originalErrorMessage:(T=g.target.error)===null||T===void 0?void 0:T.message}))}})})}function fd(n){return`${n.options.appId}-${n.name}`}var un=new Ie("@firebase/app-check");function Fi(n,e){return rn()?hd(n,e).catch(t=>{un.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function oc(){return nc().enabled}function ac(){return E(this,null,function*(){let n=nc();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pd={error:"UNKNOWN_ERROR"};function md(n){return Hn.encodeString(JSON.stringify(n),!1)}function $i(n,e=!1,t=!1){return E(this,null,function*(){let i=n.app;rc(i);let s=ge(i),c=s.token,l;if(c&&!ln(c)&&(s.token=void 0,c=void 0),!c){let T=yield s.cachedTokenPromise;T&&(ln(T)?c=T:yield Fi(i,void 0))}if(!e&&c&&ln(c))return{token:c.token};let f=!1;if(oc())try{s.exchangeTokenPromise||(s.exchangeTokenPromise=ic(sc(i,yield ac()),n.heartbeatServiceProvider).finally(()=>{s.exchangeTokenPromise=void 0}),f=!0);let T=yield s.exchangeTokenPromise;return yield Fi(i,T),s.token=T,{token:T.token}}catch(T){return T.code==="appCheck/throttled"||T.code==="appCheck/initial-throttle"?un.warn(T.message):t&&un.error(T),Ui(T)}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),f=!0),c=yield ge(i).exchangeTokenPromise}catch(T){T.code==="appCheck/throttled"||T.code==="appCheck/initial-throttle"?un.warn(T.message):t&&un.error(T),l=T}let g;return c?l?ln(c)?g={token:c.token,internalError:l}:g=Ui(l):(g={token:c.token},s.token=c,yield Fi(i,c)):g=Ui(l),f&&vd(i,g),g})}function gd(n){return E(this,null,function*(){let e=n.app;rc(e);let{provider:t}=ge(e);if(oc()){let i=yield ac(),{token:s}=yield ic(sc(e,i),n.heartbeatServiceProvider);return{token:s}}else{let{token:i}=yield t.getToken();return{token:i}}})}function _d(n,e,t,i){let{app:s}=n,c=ge(s),l={next:t,error:i,type:e};if(c.tokenObservers=[...c.tokenObservers,l],c.token&&ln(c.token)){let f=c.token;Promise.resolve().then(()=>{t({token:f.token}),ec(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>ec(n))}function cc(n,e){let t=ge(n),i=t.tokenObservers.filter(s=>s.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function ec(n){let{app:e}=n,t=ge(e),i=t.tokenRefresher;i||(i=yd(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function yd(n){let{app:e}=n;return new Bi(()=>E(null,null,function*(){let t=ge(e),i;if(t.token?i=yield $i(n,!0):i=yield $i(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=ge(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,s=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},Za.RETRIAL_MIN_WAIT,Za.RETRIAL_MAX_WAIT)}function vd(n,e){let t=ge(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ln(n){return n.expireTimeMillis-Date.now()>0}function Ui(n){return{token:md(pd),error:n}}var ji=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ge(this.app);for(let t of e)cc(this.app,t.next);return Promise.resolve()}};function Id(n,e){return new ji(n,e)}function Ed(n){return{getToken:e=>$i(n,e),getLimitedUseToken:()=>gd(n),addTokenListener:e=>_d(n,"INTERNAL",e),removeTokenListener:e=>cc(n.app,e)}}var wd="@firebase/app-check",Td="0.10.1";var Ad="app-check",tc="app-check-internal";function bd(){me(new re(Ad,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Id(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tc).initialize()})),me(new re(tc,n=>{let e=n.getProvider("app-check").getImmediate();return Ed(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),z(wd,Td)}bd();var Sd="app-check";var Pt=class{constructor(){return St(Sd)}};var Pd=["localhost","0.0.0.0","127.0.0.1"],d_=typeof window<"u"&&Pd.includes(window.location.hostname);function Tc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ac=Tc,bc=new pe("auth","Firebase",Tc());var cr=new Ie("@firebase/auth");function Rd(n,...e){cr.logLevel<=F.WARN&&cr.warn(`Auth (${ze}): ${n}`,...e)}function ir(n,...e){cr.logLevel<=F.ERROR&&cr.error(`Auth (${ze}): ${n}`,...e)}function Ye(n,...e){throw us(n,...e)}function dt(n,...e){return us(n,...e)}function Sc(n,e,t){let i=Object.assign(Object.assign({},Ac()),{[e]:t});return new pe("auth","Firebase",i).create(e,{appName:n.name})}function ht(n){return Sc(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function us(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return bc.create(n,...e)}function R(n,e,...t){if(!n)throw us(e,...t)}function Ne(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ir(e),new Error(e)}function Je(n,e){n||Ne(e)}function Ki(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Cd(){return uc()==="http:"||uc()==="https:"}function uc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function kd(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cd()||Ra()||"connection"in navigator)?navigator.onLine:!0}function Dd(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ft=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Je(t>e,"Short delay should be less than long delay!"),this.isMobile=Sa()||Ca()}get(){return kd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ls(n,e){Je(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ur=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Nd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Od=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xd=new ft(3e4,6e4);function hs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Rt(c,l,f,g){return E(this,arguments,function*(n,e,t,i,s={}){return Pc(n,s,()=>E(null,null,function*(){let T={},S={};i&&(e==="GET"?S=i:T={body:JSON.stringify(i)});let P=sn(Object.assign({key:n.config.apiKey},S)).slice(1),A=yield n._getAdditionalHeaders();A["Content-Type"]="application/json",n.languageCode&&(A["X-Firebase-Locale"]=n.languageCode);let N=Object.assign({method:e,headers:A},T);return Pa()||(N.referrerPolicy="no-referrer"),n.emulatorConfig&&st(n.emulatorConfig.host)&&(N.credentials="include"),ur.fetch()(yield Rc(n,n.config.apiHost,t,P),N)}))})}function Pc(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},Nd),e);try{let s=new Hi(n),c=yield Promise.race([t(),s.promise]);s.clearNetworkTimeout();let l=yield c.json();if("needConfirmation"in l)throw rr(n,"account-exists-with-different-credential",l);if(c.ok&&!("errorMessage"in l))return l;{let f=c.ok?l.errorMessage:l.error.message,[g,T]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rr(n,"credential-already-in-use",l);if(g==="EMAIL_EXISTS")throw rr(n,"email-already-in-use",l);if(g==="USER_DISABLED")throw rr(n,"user-disabled",l);let S=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(T)throw Sc(n,S,T);Ye(n,S)}}catch(s){if(s instanceof ce)throw s;Ye(n,"network-request-failed",{message:String(s)})}})}function Vd(c,l,f,g){return E(this,arguments,function*(n,e,t,i,s={}){let T=yield Rt(n,e,t,i,s);return"mfaPendingCredential"in T&&Ye(n,"multi-factor-auth-required",{_serverResponse:T}),T})}function Rc(n,e,t,i){return E(this,null,function*(){let s=`${e}${t}?${i}`,c=n,l=c.config.emulator?ls(n.config,s):`${n.config.apiScheme}://${s}`;return Od.includes(t)&&(yield c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(l).toString():l})}var Hi=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(dt(this.auth,"network-request-failed")),xd.get())})}};function rr(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let s=dt(n,e,i);return s.customData._tokenResponse=t,s}function Md(n,e){return E(this,null,function*(){return Rt(n,"POST","/v1/accounts:delete",e)})}function lr(n,e){return E(this,null,function*(){return Rt(n,"POST","/v1/accounts:lookup",e)})}function hn(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ds(n,e=!1){return E(this,null,function*(){let t=Ce(n),i=yield t.getIdToken(e),s=fs(i);R(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");let c=typeof s.firebase=="object"?s.firebase:void 0,l=c?.sign_in_provider;return{claims:s,token:i,authTime:hn(zi(s.auth_time)),issuedAtTime:hn(zi(s.iat)),expirationTime:hn(zi(s.exp)),signInProvider:l||null,signInSecondFactor:c?.sign_in_second_factor||null}})}function zi(n){return Number(n)*1e3}function fs(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ir("JWT malformed, contained fewer than 3 sections"),null;try{let s=Qn(t);return s?JSON.parse(s):(ir("Failed to decode base64 JWT payload"),null)}catch(s){return ir("Caught error parsing JWT payload as JSON",s?.toString()),null}}function lc(n){let e=fs(n);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fn(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof ce&&Ld(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function Ld({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Qi=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pn=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hn(this.lastLoginAt),this.creationTime=hn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function hr(n){return E(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),s=yield fn(n,lr(t,{idToken:i}));R(s?.users.length,t,"internal-error");let c=s.users[0];n._notifyReloadListener(c);let l=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?Cc(c.providerUserInfo):[],f=Fd(n.providerData,l),g=n.isAnonymous,T=!(n.email&&c.passwordHash)&&!f?.length,S=g?T:!1,P={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:f,metadata:new pn(c.createdAt,c.lastLoginAt),isAnonymous:S};Object.assign(n,P)})}function ps(n){return E(this,null,function*(){let e=Ce(n);yield hr(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Fd(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Cc(n){return n.map(e=>{var{providerId:t}=e,i=ci(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Ud(n,e){return E(this,null,function*(){let t=yield Pc(n,{},()=>E(null,null,function*(){let i=sn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:c}=n.config,l=yield Rc(n,s,"/v1/token",`key=${c}`),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";let g={method:"POST",headers:f,body:i};return n.emulatorConfig&&st(n.emulatorConfig.host)&&(g.credentials="include"),ur.fetch()(l,g)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Bd(n,e){return E(this,null,function*(){return Rt(n,"POST","/v2/accounts:revokeToken",hs(n,e))})}var dn=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){R(e.length!==0,"internal-error");let t=lc(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:i,refreshToken:s,expiresIn:c}=yield Ud(e,t);this.updateTokensAndExpiration(i,s,Number(c))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:s,expirationTime:c}=t,l=new n;return i&&(R(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(R(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),c&&(R(typeof c=="number","internal-error",{appName:e}),l.expirationTime=c),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ne("not implemented")}};function He(n,e){R(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Qe=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,c=ci(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new pn(c.createdAt||void 0,c.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield fn(this,this.stsTokenManager.getToken(this.auth,e));return R(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ds(this,e)}reload(){return ps(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield hr(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(he(this.auth.app))return Promise.reject(ht(this.auth));let e=yield this.getIdToken();return yield fn(this,Md(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,c,l,f,g,T,S;let P=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(s=t.email)!==null&&s!==void 0?s:void 0,N=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,O=(l=t.photoURL)!==null&&l!==void 0?l:void 0,$=(f=t.tenantId)!==null&&f!==void 0?f:void 0,U=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,ue=(T=t.createdAt)!==null&&T!==void 0?T:void 0,K=(S=t.lastLoginAt)!==null&&S!==void 0?S:void 0,{uid:W,emailVerified:oe,isAnonymous:Ze,providerData:ie,stsTokenManager:v}=t;R(W&&v,e,"internal-error");let h=dn.fromJSON(this.name,v);R(typeof W=="string",e,"internal-error"),He(P,e.name),He(A,e.name),R(typeof oe=="boolean",e,"internal-error"),R(typeof Ze=="boolean",e,"internal-error"),He(N,e.name),He(O,e.name),He($,e.name),He(U,e.name),He(ue,e.name),He(K,e.name);let p=new n({uid:W,auth:e,email:A,emailVerified:oe,displayName:P,isAnonymous:Ze,photoURL:O,phoneNumber:N,tenantId:$,stsTokenManager:h,createdAt:ue,lastLoginAt:K});return ie&&Array.isArray(ie)&&(p.providerData=ie.map(m=>Object.assign({},m))),U&&(p._redirectEventId=U),p}static _fromIdTokenResponse(e,t,i=!1){return E(this,null,function*(){let s=new dn;s.updateFromServerResponse(t);let c=new n({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return yield hr(c),c})}static _fromGetAccountInfoResponse(e,t,i){return E(this,null,function*(){let s=t.users[0];R(s.localId!==void 0,"internal-error");let c=s.providerUserInfo!==void 0?Cc(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!c?.length,f=new dn;f.updateFromIdToken(i);let g=new n({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:l}),T={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new pn(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!c?.length};return Object.assign(g,T),g})}};var hc=new Map;function Oe(n){Je(n instanceof Function,"Expected a class definition");let e=hc.get(n);return e?(Je(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hc.set(n,e),e)}var qd=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,i){return E(this,null,function*(){this.storage[t]=i})}_get(t){return E(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Yi=qd;function sr(n,e,t){return`firebase:${n}:${e}:${t}`}var dr=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:s,name:c}=this.auth;this.fullUserKey=sr(this.userKey,s.apiKey,c),this.fullPersistenceKey=sr("persistence",s.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield lr(this.auth,{idToken:e}).catch(()=>{});return t?Qe._fromGetAccountInfoResponse(this.auth,t,e):null}return Qe._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return E(this,null,function*(){if(!t.length)return new n(Oe(Yi),e,i);let s=(yield Promise.all(t.map(T=>E(null,null,function*(){if(yield T._isAvailable())return T})))).filter(T=>T),c=s[0]||Oe(Yi),l=sr(i,e.config.apiKey,e.name),f=null;for(let T of t)try{let S=yield T._get(l);if(S){let P;if(typeof S=="string"){let A=yield lr(e,{idToken:S}).catch(()=>{});if(!A)break;P=yield Qe._fromGetAccountInfoResponse(e,A,S)}else P=Qe._fromJSON(e,S);T!==c&&(f=P),c=T;break}}catch{}let g=s.filter(T=>T._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new n(c,e,i):(c=g[0],f&&(yield c._set(l,f.toJSON())),yield Promise.all(t.map(T=>E(null,null,function*(){if(T!==c)try{yield T._remove(l)}catch{}}))),new n(c,e,i))})}};function dc(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Oc(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Vc(e))return"Blackberry";if(Mc(e))return"Webos";if(Dc(e))return"Safari";if((e.includes("chrome/")||Nc(e))&&!e.includes("edge/"))return"Chrome";if(xc(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function kc(n=Q()){return/firefox\//i.test(n)}function Dc(n=Q()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nc(n=Q()){return/crios\//i.test(n)}function Oc(n=Q()){return/iemobile/i.test(n)}function xc(n=Q()){return/android/i.test(n)}function Vc(n=Q()){return/blackberry/i.test(n)}function Mc(n=Q()){return/webos/i.test(n)}function ms(n=Q()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $d(n=Q()){var e;return ms(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jd(){return ka()&&document.documentMode===10}function Lc(n=Q()){return ms(n)||xc(n)||Mc(n)||Vc(n)||/windows phone/i.test(n)||Oc(n)}function Fc(n,e=[]){let t;switch(n){case"Browser":t=dc(Q());break;case"Worker":t=`${dc(Q())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ze}/${i}`}var Ji=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=c=>new Promise((l,f)=>{try{let g=e(c);l(g)}catch(g){f(g)}});i.onAbort=t,this.queue.push(i);let s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function zd(t){return E(this,arguments,function*(n,e={}){return Rt(n,"GET","/v2/passwordPolicy",hs(n,e))})}var Wd=6,Xi=class{constructor(e){var t,i,s,c;let l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:Wd,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,c,l,f;let g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(s=g.containsLowercaseLetter)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(l=g.containsNumericCharacter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}};var Zi=class{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fr(this),this.idTokenSubscription=new fr(this),this.beforeStateQueue=new Ji(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oe(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var i,s,c;if(!this._deleted&&(this.persistenceManager=yield dr.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield lr(this,{idToken:e}),i=yield Qe._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(he(this.app)){let l=this.app.settings.authIdToken;return l?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(f,f))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),s=i,c=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s?._redirectEventId,g=yield this.tryRedirectSignIn(e);(!l||l===f)&&g?.user&&(s=g.user,c=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(c)try{yield this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield hr(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Dd()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(he(this.app))return Promise.reject(ht(this));let t=e?Ce(e):null;return t&&R(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return he(this.app)?Promise.reject(ht(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return he(this.app)?Promise.reject(ht(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(Oe(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield zd(this),t=new Xi(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pe("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield Bd(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Oe(e)||this._popupRedirectResolver;R(t,this,"argument-error"),this.redirectPersistenceManager=yield dr.create(this,[Oe(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};let c=typeof t=="function"?t:t.next.bind(t),l=!1,f=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(f,this,"internal-error"),f.then(()=>{l||c(this.currentUser)}),typeof t=="function"){let g=e.addObserver(t,i,s);return()=>{l=!0,g()}}else{let g=e.addObserver(t);return()=>{l=!0,g()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let s=yield this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(he(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Rd(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function gs(n){return Ce(n)}var fr=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Oa(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var _s={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Gd(n){_s=n}function Kd(n){return _s.loadJS(n)}function Hd(){return _s.gapiScript}function Uc(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ys(n,e){let t=At(n,"auth");if(t.isInitialized()){let s=t.getImmediate(),c=t.getOptions();if(ve(c,e??{}))return s;Ye(s,"already-initialized")}return t.initialize({options:e})}function Qd(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Oe);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function vs(n,e,t){let i=gs(n);R(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let s=!!t?.disableWarnings,c=Bc(e),{host:l,port:f}=Yd(e),g=f===null?"":`:${f}`,T={url:`${c}//${l}${g}/`},S=Object.freeze({host:l,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){R(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),R(ve(T,i.config.emulator)&&ve(S,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=T,i.emulatorConfig=S,i.settings.appVerificationDisabledForTesting=!0,st(l)?(Yn(`${c}//${l}${g}`),Jn("Auth",!0)):s||Jd()}function Bc(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Yd(n){let e=Bc(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){let c=s[1];return{host:c,port:fc(i.substr(c.length+1))}}else{let[c,l]=i.split(":");return{host:c,port:fc(l)}}}function fc(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Jd(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var pr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ne("not implemented")}_getIdTokenResponse(e){return Ne("not implemented")}_linkToIdToken(e,t){return Ne("not implemented")}_getReauthenticationResolver(e){return Ne("not implemented")}};function Wi(n,e){return E(this,null,function*(){return Vd(n,"POST","/v1/accounts:signInWithIdp",hs(n,e))})}var mr=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var es=class extends mr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var mn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,s=!1){return E(this,null,function*(){let c=yield Qe._fromIdTokenResponse(e,i,s),l=pc(i);return new n({user:c,providerId:l,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return E(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let s=pc(i);return new n({user:e,providerId:s,_tokenResponse:i,operationType:t})})}};function pc(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ts=class n extends ce{constructor(e,t,i,s){var c;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new n(e,t,i,s)}};function qc(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ts._fromErrorAndOperation(n,c,e,i):c})}function Xd(n,e,t=!1){return E(this,null,function*(){let i=yield fn(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return mn._forOperation(n,"link",i)})}function Zd(n,e,t=!1){return E(this,null,function*(){let{auth:i}=n;if(he(i.app))return Promise.reject(ht(i));let s="reauthenticate";try{let c=yield fn(n,qc(i,s,e,n),t);R(c.idToken,i,"internal-error");let l=fs(c.idToken);R(l,i,"internal-error");let{sub:f}=l;return R(n.uid===f,i,"user-mismatch"),mn._forOperation(n,s,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ye(i,"user-mismatch"),c}})}function ef(n,e,t=!1){return E(this,null,function*(){if(he(n.app))return Promise.reject(ht(n));let i="signIn",s=yield qc(n,i,e),c=yield mn._fromIdTokenResponse(n,i,s);return t||(yield n._updateCurrentUser(c.user)),c})}function Is(n,e,t,i){return Ce(n).onIdTokenChanged(e,t,i)}function Es(n,e,t){return Ce(n).beforeAuthStateChanged(e,t)}var gr="__sak";var _r=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gr,"1"),this.storage.removeItem(gr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var tf=1e3,nf=10,rf=(()=>{class n extends _r{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Lc(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let s=this.storage.getItem(i),c=this.localCache[i];s!==c&&t(i,c,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((f,g,T)=>{this.notifyListeners(f,T)});return}let s=t.key;i?this.detachListener():this.stopPolling();let c=()=>{let f=this.storage.getItem(s);!i&&this.localCache[s]===f||this.notifyListeners(s,f)},l=this.storage.getItem(s);jd()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(c,nf):c()}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let c of Array.from(s))c(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},tf)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return E(this,null,function*(){yield qe(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return E(this,null,function*(){let i=yield qe(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return E(this,null,function*(){yield qe(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),$c=rf;var sf=(()=>{class n extends _r{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),ws=sf;function of(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var af=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(c=>c.isListeningto(t));if(i)return i;let s=new n(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let i=t,{eventId:s,eventType:c,data:l}=i.data,f=this.handlersMap[c];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:c});let g=Array.from(f).map(S=>E(this,null,function*(){return S(i.origin,l)})),T=yield of(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:c,response:T})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function jc(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var ns=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return E(this,null,function*(){let s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let c,l;return new Promise((f,g)=>{let T=jc("",20);s.port1.start();let S=setTimeout(()=>{g(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(P){let A=P;if(A.data.eventId===T)switch(A.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(A.data.response);break;default:clearTimeout(S),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:T,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})})}};function we(){return window}function cf(n){we().location.href=n}function zc(){return typeof we().WorkerGlobalScope<"u"&&typeof we().importScripts=="function"}function uf(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function lf(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function hf(){return zc()?self:null}var Wc="firebaseLocalStorageDb",df=1,yr="firebaseLocalStorage",Gc="fbase_key",pt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ir(n,e){return n.transaction([yr],e?"readwrite":"readonly").objectStore(yr)}function ff(){let n=indexedDB.deleteDatabase(Wc);return new pt(n).toPromise()}function rs(){let n=indexedDB.open(Wc,df);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(yr,{keyPath:Gc})}catch(s){t(s)}}),n.addEventListener("success",()=>E(null,null,function*(){let i=n.result;i.objectStoreNames.contains(yr)?e(i):(i.close(),yield ff(),e(yield rs()))}))})}function mc(n,e,t){return E(this,null,function*(){let i=Ir(n,!0).put({[Gc]:e,value:t});return new pt(i).toPromise()})}function pf(n,e){return E(this,null,function*(){let t=Ir(n,!1).get(e),i=yield new pt(t).toPromise();return i===void 0?null:i.value})}function gc(n,e){let t=Ir(n,!0).delete(e);return new pt(t).toPromise()}var mf=800,gf=3,_f=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield rs(),this.db)})}_withRetries(t){return E(this,null,function*(){let i=0;for(;;)try{let s=yield this._openDb();return yield t(s)}catch(s){if(i++>gf)throw s;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return zc()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=af._getInstance(hf()),this.receiver._subscribe("keyChanged",(t,i)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,i;if(this.activeServiceWorker=yield uf(),!this.activeServiceWorker)return;this.sender=new ns(this.activeServiceWorker);let s=yield this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((i=s[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||lf()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield rs();return yield mc(t,gr,"1"),yield gc(t,gr),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(s=>mc(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let i=yield this._withRetries(s=>pf(s,t));return this.localCache[t]=i,i})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>gc(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(c=>{let l=Ir(c,!1).getAll();return new pt(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],s=new Set;if(t.length!==0)for(let{fbase_key:c,value:l}of t)s.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(l)&&(this.notifyListeners(c,l),i.push(c));for(let c of Object.keys(this.localCache))this.localCache[c]&&!s.has(c)&&(this.notifyListeners(c,null),i.push(c));return i})}notifyListeners(t,i){this.localCache[t]=i;let s=this.listeners[t];if(s)for(let c of Array.from(s))c(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),mf)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Kc=_f;var w_=Uc("rcb"),T_=new ft(3e4,6e4);function yf(n,e){return e?Oe(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var gn=class extends pr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function vf(n){return ef(n.auth,new gn(n),n.bypassAuthState)}function If(n){let{auth:e,user:t}=n;return R(t,e,"internal-error"),Zd(t,new gn(n),n.bypassAuthState)}function Ef(n){return E(this,null,function*(){let{auth:e,user:t}=n;return R(t,e,"internal-error"),Xd(t,new gn(n),n.bypassAuthState)})}var is=class{constructor(e,t,i,s,c=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:s,tenantId:c,error:l,type:f}=e;if(l){this.reject(l);return}let g={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(f)(g))}catch(T){this.reject(T)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vf;case"linkViaPopup":case"linkViaRedirect":return Ef;case"reauthViaPopup":case"reauthViaRedirect":return If;default:Ye(this.auth,"internal-error")}}resolve(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var A_=new ft(2e3,1e4);var wf="pendingRedirect",or=new Map,ss=class n extends is{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return E(this,null,function*(){let e=or.get(this.auth._key());if(!e){try{let i=(yield Tf(this.resolver,this.auth))?yield qe(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}or.set(this.auth._key(),e)}return this.bypassAuthState||or.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return qe(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,qe(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function Tf(n,e){return E(this,null,function*(){let t=Sf(e),i=bf(n);if(!(yield i._isAvailable()))return!1;let s=(yield i._get(t))==="true";return yield i._remove(t),s})}function Af(n,e){or.set(n._key(),e)}function bf(n){return Oe(n._redirectPersistence)}function Sf(n){return sr(wf,n.config.apiKey,n.name)}function Pf(n,e,t=!1){return E(this,null,function*(){if(he(n.app))return Promise.reject(ht(n));let i=gs(n),s=yf(i,e),l=yield new ss(i,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,yield i._persistUserIfCurrent(l.user),yield i._setRedirectUser(null,e)),l})}var Rf=600*1e3,os=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Cf(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Hc(e)){let s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(dt(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rf&&this.cachedEventUids.clear(),this.cachedEventUids.has(_c(e))}saveEventToCache(e){this.cachedEventUids.add(_c(e)),this.lastProcessedEventTime=Date.now()}};function _c(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Hc({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Cf(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hc(n);default:return!1}}function kf(t){return E(this,arguments,function*(n,e={}){return Rt(n,"GET","/v1/projects",e)})}var Df=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nf=/^https?/;function Of(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield kf(n);for(let t of e)try{if(xf(t))return}catch{}Ye(n,"unauthorized-domain")})}function xf(n){let e=Ki(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!Nf.test(t))return!1;if(Df.test(n))return i===n;let s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var Vf=new ft(3e4,6e4);function yc(){let n=we().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Mf(n){return new Promise((e,t)=>{var i,s,c;function l(){yc(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yc(),t(dt(n,"network-request-failed"))},timeout:Vf.get()})}if(!((s=(i=we().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((c=we().gapi)===null||c===void 0)&&c.load)l();else{let f=Uc("iframefcb");return we()[f]=()=>{gapi.load?l():t(dt(n,"network-request-failed"))},Kd(`${Hd()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw ar=null,e})}var ar=null;function Lf(n){return ar=ar||Mf(n),ar}var Ff=new ft(5e3,15e3),Uf="__/auth/iframe",Bf="emulator/auth/iframe",qf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$f=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jf(n){let e=n.config;R(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ls(e,Bf):`https://${n.config.authDomain}/${Uf}`,i={apiKey:e.apiKey,appName:n.name,v:ze},s=$f.get(n.config.apiHost);s&&(i.eid=s);let c=n._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${sn(i).slice(1)}`}function zf(n){return E(this,null,function*(){let e=yield Lf(n),t=we().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:jf(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qf,dontclear:!0},i=>new Promise((s,c)=>E(null,null,function*(){yield i.restyle({setHideOnLeave:!1});let l=dt(n,"network-request-failed"),f=we().setTimeout(()=>{c(l)},Ff.get());function g(){we().clearTimeout(f),s(i)}i.ping(g).then(g,()=>{c(l)})})))})}var Wf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Gf=500,Kf=600,Hf="_blank",Qf="http://localhost",vr=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Yf(n,e,t,i=Gf,s=Kf){let c=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString(),f="",g=Object.assign(Object.assign({},Wf),{width:i.toString(),height:s.toString(),top:c,left:l}),T=Q().toLowerCase();t&&(f=Nc(T)?Hf:t),kc(T)&&(e=e||Qf,g.scrollbars="yes");let S=Object.entries(g).reduce((A,[N,O])=>`${A}${N}=${O},`,"");if($d(T)&&f!=="_self")return Jf(e||"",f),new vr(null);let P=window.open(e||"",f,S);R(P,n,"popup-blocked");try{P.focus()}catch{}return new vr(P)}function Jf(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Xf="__/auth/handler",Zf="emulator/auth/handler",ep=encodeURIComponent("fac");function vc(n,e,t,i,s,c){return E(this,null,function*(){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");let l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ze,eventId:s};if(e instanceof mr){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Na(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(let[S,P]of Object.entries(c||{}))l[S]=P}if(e instanceof es){let S=e.getScopes().filter(P=>P!=="");S.length>0&&(l.scopes=S.join(","))}n.tenantId&&(l.tid=n.tenantId);let f=l;for(let S of Object.keys(f))f[S]===void 0&&delete f[S];let g=yield n._getAppCheckToken(),T=g?`#${ep}=${encodeURIComponent(g)}`:"";return`${tp(n)}?${sn(f).slice(1)}${T}`})}function tp({config:n}){return n.emulator?ls(n,Zf):`https://${n.authDomain}/${Xf}`}var Gi="webStorageSupport",as=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ws,this._completeRedirectFn=Pf,this._overrideRedirectResult=Af}_openPopup(e,t,i,s){return E(this,null,function*(){var c;Je((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");let l=yield vc(e,t,i,Ki(),s);return Yf(e,l,jc())})}_openRedirect(e,t,i,s){return E(this,null,function*(){yield this._originValidation(e);let c=yield vc(e,t,i,Ki(),s);return cf(c),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:s,promise:c}=this.eventManagers[t];return s?Promise.resolve(s):(Je(c,"If manager is not set, promise should be"),c)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return E(this,null,function*(){let t=yield zf(e),i=new os(e);return t.register("authEvent",s=>(R(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Gi,{type:Gi},s=>{var c;let l=(c=s?.[0])===null||c===void 0?void 0:c[Gi];l!==void 0&&t(!!l),Ye(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Of(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lc()||Dc()||ms()}},Qc=as;var Ic="@firebase/auth",Ec="1.10.8";var cs=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function np(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rp(n){me(new re("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:l,authDomain:f}=i.options;R(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});let g={apiKey:l,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fc(n)},T=new Zi(i,s,c,g);return Qd(T,t),T},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),me(new re("auth-internal",e=>{let t=gs(e.getProvider("auth").getImmediate());return(i=>new cs(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),z(Ic,Ec,np(n)),z(Ic,Ec,"esm2017")}var ip=300,sp=Ei("authIdTokenMaxAge")||ip,wc=null,op=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sp)return;let s=t?.token;wc!==s&&(wc=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});function Ts(n=at()){let e=At(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ys(n,{popupRedirectResolver:Qc,persistence:[Kc,$c,ws]}),i=Ei("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let c=new URL(i,location.origin);if(location.origin===c.origin){let l=op(c.toString());Es(t,l,()=>l(t.currentUser)),Is(t,f=>l(f))}}let s=vi("auth");return s&&vs(t,`http://${s}`),t}function ap(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Gd({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{let c=dt("internal-error");c.customData=s,t(c)},i.type="text/javascript",i.charset="UTF-8",ap().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rp("Browser");var Yc="auth",_n=class{constructor(e){return e}},yn=class{constructor(){return St(Yc)}};var As=new wt("angularfire2.auth-instances");function em(n,e){let t=cn(Yc,n,e);return t&&new _n(t)}function tm(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new _n(i)}}var nm={provide:yn,deps:[[new le,As]]},rm={provide:_n,useFactory:em,deps:[[new le,As],De]};function Jc(n,...e){return z("angularfire",We.full,"auth"),Tt([rm,nm,{provide:As,useFactory:tm(n),multi:!0,deps:[ye,$e,Ge,lt,[new le,Pt],...e]}])}var Xc=ut(Ts,!0);var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eu={};var Er,tu;(function(){var n;function e(v,h){function p(){}p.prototype=h.prototype,v.D=h.prototype,v.prototype=new p,v.prototype.constructor=v,v.C=function(m,_,I){for(var d=Array(arguments.length-2),be=2;be<arguments.length;be++)d[be-2]=arguments[be];return h.prototype[_].apply(m,d)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,h,p){p||(p=0);var m=Array(16);if(typeof h=="string")for(var _=0;16>_;++_)m[_]=h.charCodeAt(p++)|h.charCodeAt(p++)<<8|h.charCodeAt(p++)<<16|h.charCodeAt(p++)<<24;else for(_=0;16>_;++_)m[_]=h[p++]|h[p++]<<8|h[p++]<<16|h[p++]<<24;h=v.g[0],p=v.g[1],_=v.g[2];var I=v.g[3],d=h+(I^p&(_^I))+m[0]+3614090360&4294967295;h=p+(d<<7&4294967295|d>>>25),d=I+(_^h&(p^_))+m[1]+3905402710&4294967295,I=h+(d<<12&4294967295|d>>>20),d=_+(p^I&(h^p))+m[2]+606105819&4294967295,_=I+(d<<17&4294967295|d>>>15),d=p+(h^_&(I^h))+m[3]+3250441966&4294967295,p=_+(d<<22&4294967295|d>>>10),d=h+(I^p&(_^I))+m[4]+4118548399&4294967295,h=p+(d<<7&4294967295|d>>>25),d=I+(_^h&(p^_))+m[5]+1200080426&4294967295,I=h+(d<<12&4294967295|d>>>20),d=_+(p^I&(h^p))+m[6]+2821735955&4294967295,_=I+(d<<17&4294967295|d>>>15),d=p+(h^_&(I^h))+m[7]+4249261313&4294967295,p=_+(d<<22&4294967295|d>>>10),d=h+(I^p&(_^I))+m[8]+1770035416&4294967295,h=p+(d<<7&4294967295|d>>>25),d=I+(_^h&(p^_))+m[9]+2336552879&4294967295,I=h+(d<<12&4294967295|d>>>20),d=_+(p^I&(h^p))+m[10]+4294925233&4294967295,_=I+(d<<17&4294967295|d>>>15),d=p+(h^_&(I^h))+m[11]+2304563134&4294967295,p=_+(d<<22&4294967295|d>>>10),d=h+(I^p&(_^I))+m[12]+1804603682&4294967295,h=p+(d<<7&4294967295|d>>>25),d=I+(_^h&(p^_))+m[13]+4254626195&4294967295,I=h+(d<<12&4294967295|d>>>20),d=_+(p^I&(h^p))+m[14]+2792965006&4294967295,_=I+(d<<17&4294967295|d>>>15),d=p+(h^_&(I^h))+m[15]+1236535329&4294967295,p=_+(d<<22&4294967295|d>>>10),d=h+(_^I&(p^_))+m[1]+4129170786&4294967295,h=p+(d<<5&4294967295|d>>>27),d=I+(p^_&(h^p))+m[6]+3225465664&4294967295,I=h+(d<<9&4294967295|d>>>23),d=_+(h^p&(I^h))+m[11]+643717713&4294967295,_=I+(d<<14&4294967295|d>>>18),d=p+(I^h&(_^I))+m[0]+3921069994&4294967295,p=_+(d<<20&4294967295|d>>>12),d=h+(_^I&(p^_))+m[5]+3593408605&4294967295,h=p+(d<<5&4294967295|d>>>27),d=I+(p^_&(h^p))+m[10]+38016083&4294967295,I=h+(d<<9&4294967295|d>>>23),d=_+(h^p&(I^h))+m[15]+3634488961&4294967295,_=I+(d<<14&4294967295|d>>>18),d=p+(I^h&(_^I))+m[4]+3889429448&4294967295,p=_+(d<<20&4294967295|d>>>12),d=h+(_^I&(p^_))+m[9]+568446438&4294967295,h=p+(d<<5&4294967295|d>>>27),d=I+(p^_&(h^p))+m[14]+3275163606&4294967295,I=h+(d<<9&4294967295|d>>>23),d=_+(h^p&(I^h))+m[3]+4107603335&4294967295,_=I+(d<<14&4294967295|d>>>18),d=p+(I^h&(_^I))+m[8]+1163531501&4294967295,p=_+(d<<20&4294967295|d>>>12),d=h+(_^I&(p^_))+m[13]+2850285829&4294967295,h=p+(d<<5&4294967295|d>>>27),d=I+(p^_&(h^p))+m[2]+4243563512&4294967295,I=h+(d<<9&4294967295|d>>>23),d=_+(h^p&(I^h))+m[7]+1735328473&4294967295,_=I+(d<<14&4294967295|d>>>18),d=p+(I^h&(_^I))+m[12]+2368359562&4294967295,p=_+(d<<20&4294967295|d>>>12),d=h+(p^_^I)+m[5]+4294588738&4294967295,h=p+(d<<4&4294967295|d>>>28),d=I+(h^p^_)+m[8]+2272392833&4294967295,I=h+(d<<11&4294967295|d>>>21),d=_+(I^h^p)+m[11]+1839030562&4294967295,_=I+(d<<16&4294967295|d>>>16),d=p+(_^I^h)+m[14]+4259657740&4294967295,p=_+(d<<23&4294967295|d>>>9),d=h+(p^_^I)+m[1]+2763975236&4294967295,h=p+(d<<4&4294967295|d>>>28),d=I+(h^p^_)+m[4]+1272893353&4294967295,I=h+(d<<11&4294967295|d>>>21),d=_+(I^h^p)+m[7]+4139469664&4294967295,_=I+(d<<16&4294967295|d>>>16),d=p+(_^I^h)+m[10]+3200236656&4294967295,p=_+(d<<23&4294967295|d>>>9),d=h+(p^_^I)+m[13]+681279174&4294967295,h=p+(d<<4&4294967295|d>>>28),d=I+(h^p^_)+m[0]+3936430074&4294967295,I=h+(d<<11&4294967295|d>>>21),d=_+(I^h^p)+m[3]+3572445317&4294967295,_=I+(d<<16&4294967295|d>>>16),d=p+(_^I^h)+m[6]+76029189&4294967295,p=_+(d<<23&4294967295|d>>>9),d=h+(p^_^I)+m[9]+3654602809&4294967295,h=p+(d<<4&4294967295|d>>>28),d=I+(h^p^_)+m[12]+3873151461&4294967295,I=h+(d<<11&4294967295|d>>>21),d=_+(I^h^p)+m[15]+530742520&4294967295,_=I+(d<<16&4294967295|d>>>16),d=p+(_^I^h)+m[2]+3299628645&4294967295,p=_+(d<<23&4294967295|d>>>9),d=h+(_^(p|~I))+m[0]+4096336452&4294967295,h=p+(d<<6&4294967295|d>>>26),d=I+(p^(h|~_))+m[7]+1126891415&4294967295,I=h+(d<<10&4294967295|d>>>22),d=_+(h^(I|~p))+m[14]+2878612391&4294967295,_=I+(d<<15&4294967295|d>>>17),d=p+(I^(_|~h))+m[5]+4237533241&4294967295,p=_+(d<<21&4294967295|d>>>11),d=h+(_^(p|~I))+m[12]+1700485571&4294967295,h=p+(d<<6&4294967295|d>>>26),d=I+(p^(h|~_))+m[3]+2399980690&4294967295,I=h+(d<<10&4294967295|d>>>22),d=_+(h^(I|~p))+m[10]+4293915773&4294967295,_=I+(d<<15&4294967295|d>>>17),d=p+(I^(_|~h))+m[1]+2240044497&4294967295,p=_+(d<<21&4294967295|d>>>11),d=h+(_^(p|~I))+m[8]+1873313359&4294967295,h=p+(d<<6&4294967295|d>>>26),d=I+(p^(h|~_))+m[15]+4264355552&4294967295,I=h+(d<<10&4294967295|d>>>22),d=_+(h^(I|~p))+m[6]+2734768916&4294967295,_=I+(d<<15&4294967295|d>>>17),d=p+(I^(_|~h))+m[13]+1309151649&4294967295,p=_+(d<<21&4294967295|d>>>11),d=h+(_^(p|~I))+m[4]+4149444226&4294967295,h=p+(d<<6&4294967295|d>>>26),d=I+(p^(h|~_))+m[11]+3174756917&4294967295,I=h+(d<<10&4294967295|d>>>22),d=_+(h^(I|~p))+m[2]+718787259&4294967295,_=I+(d<<15&4294967295|d>>>17),d=p+(I^(_|~h))+m[9]+3951481745&4294967295,v.g[0]=v.g[0]+h&4294967295,v.g[1]=v.g[1]+(_+(d<<21&4294967295|d>>>11))&4294967295,v.g[2]=v.g[2]+_&4294967295,v.g[3]=v.g[3]+I&4294967295}i.prototype.u=function(v,h){h===void 0&&(h=v.length);for(var p=h-this.blockSize,m=this.B,_=this.h,I=0;I<h;){if(_==0)for(;I<=p;)s(this,v,I),I+=this.blockSize;if(typeof v=="string"){for(;I<h;)if(m[_++]=v.charCodeAt(I++),_==this.blockSize){s(this,m),_=0;break}}else for(;I<h;)if(m[_++]=v[I++],_==this.blockSize){s(this,m),_=0;break}}this.h=_,this.o+=h},i.prototype.v=function(){var v=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);v[0]=128;for(var h=1;h<v.length-8;++h)v[h]=0;var p=8*this.o;for(h=v.length-8;h<v.length;++h)v[h]=p&255,p/=256;for(this.u(v),v=Array(16),h=p=0;4>h;++h)for(var m=0;32>m;m+=8)v[p++]=this.g[h]>>>m&255;return v};function c(v,h){var p=f;return Object.prototype.hasOwnProperty.call(p,v)?p[v]:p[v]=h(v)}function l(v,h){this.h=h;for(var p=[],m=!0,_=v.length-1;0<=_;_--){var I=v[_]|0;m&&I==h||(p[_]=I,m=!1)}this.g=p}var f={};function g(v){return-128<=v&&128>v?c(v,function(h){return new l([h|0],0>h?-1:0)}):new l([v|0],0>v?-1:0)}function T(v){if(isNaN(v)||!isFinite(v))return P;if(0>v)return U(T(-v));for(var h=[],p=1,m=0;v>=p;m++)h[m]=v/p|0,p*=4294967296;return new l(h,0)}function S(v,h){if(v.length==0)throw Error("number format error: empty string");if(h=h||10,2>h||36<h)throw Error("radix out of range: "+h);if(v.charAt(0)=="-")return U(S(v.substring(1),h));if(0<=v.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=T(Math.pow(h,8)),m=P,_=0;_<v.length;_+=8){var I=Math.min(8,v.length-_),d=parseInt(v.substring(_,_+I),h);8>I?(I=T(Math.pow(h,I)),m=m.j(I).add(T(d))):(m=m.j(p),m=m.add(T(d)))}return m}var P=g(0),A=g(1),N=g(16777216);n=l.prototype,n.m=function(){if($(this))return-U(this).m();for(var v=0,h=1,p=0;p<this.g.length;p++){var m=this.i(p);v+=(0<=m?m:4294967296+m)*h,h*=4294967296}return v},n.toString=function(v){if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(O(this))return"0";if($(this))return"-"+U(this).toString(v);for(var h=T(Math.pow(v,6)),p=this,m="";;){var _=oe(p,h).g;p=ue(p,_.j(h));var I=((0<p.g.length?p.g[0]:p.h)>>>0).toString(v);if(p=_,O(p))return I+m;for(;6>I.length;)I="0"+I;m=I+m}},n.i=function(v){return 0>v?0:v<this.g.length?this.g[v]:this.h};function O(v){if(v.h!=0)return!1;for(var h=0;h<v.g.length;h++)if(v.g[h]!=0)return!1;return!0}function $(v){return v.h==-1}n.l=function(v){return v=ue(this,v),$(v)?-1:O(v)?0:1};function U(v){for(var h=v.g.length,p=[],m=0;m<h;m++)p[m]=~v.g[m];return new l(p,~v.h).add(A)}n.abs=function(){return $(this)?U(this):this},n.add=function(v){for(var h=Math.max(this.g.length,v.g.length),p=[],m=0,_=0;_<=h;_++){var I=m+(this.i(_)&65535)+(v.i(_)&65535),d=(I>>>16)+(this.i(_)>>>16)+(v.i(_)>>>16);m=d>>>16,I&=65535,d&=65535,p[_]=d<<16|I}return new l(p,p[p.length-1]&-2147483648?-1:0)};function ue(v,h){return v.add(U(h))}n.j=function(v){if(O(this)||O(v))return P;if($(this))return $(v)?U(this).j(U(v)):U(U(this).j(v));if($(v))return U(this.j(U(v)));if(0>this.l(N)&&0>v.l(N))return T(this.m()*v.m());for(var h=this.g.length+v.g.length,p=[],m=0;m<2*h;m++)p[m]=0;for(m=0;m<this.g.length;m++)for(var _=0;_<v.g.length;_++){var I=this.i(m)>>>16,d=this.i(m)&65535,be=v.i(_)>>>16,Vt=v.i(_)&65535;p[2*m+2*_]+=d*Vt,K(p,2*m+2*_),p[2*m+2*_+1]+=I*Vt,K(p,2*m+2*_+1),p[2*m+2*_+1]+=d*be,K(p,2*m+2*_+1),p[2*m+2*_+2]+=I*be,K(p,2*m+2*_+2)}for(m=0;m<h;m++)p[m]=p[2*m+1]<<16|p[2*m];for(m=h;m<2*h;m++)p[m]=0;return new l(p,0)};function K(v,h){for(;(v[h]&65535)!=v[h];)v[h+1]+=v[h]>>>16,v[h]&=65535,h++}function W(v,h){this.g=v,this.h=h}function oe(v,h){if(O(h))throw Error("division by zero");if(O(v))return new W(P,P);if($(v))return h=oe(U(v),h),new W(U(h.g),U(h.h));if($(h))return h=oe(v,U(h)),new W(U(h.g),h.h);if(30<v.g.length){if($(v)||$(h))throw Error("slowDivide_ only works with positive integers.");for(var p=A,m=h;0>=m.l(v);)p=Ze(p),m=Ze(m);var _=ie(p,1),I=ie(m,1);for(m=ie(m,2),p=ie(p,2);!O(m);){var d=I.add(m);0>=d.l(v)&&(_=_.add(p),I=d),m=ie(m,1),p=ie(p,1)}return h=ue(v,_.j(h)),new W(_,h)}for(_=P;0<=v.l(h);){for(p=Math.max(1,Math.floor(v.m()/h.m())),m=Math.ceil(Math.log(p)/Math.LN2),m=48>=m?1:Math.pow(2,m-48),I=T(p),d=I.j(h);$(d)||0<d.l(v);)p-=m,I=T(p),d=I.j(h);O(I)&&(I=A),_=_.add(I),v=ue(v,d)}return new W(_,v)}n.A=function(v){return oe(this,v).h},n.and=function(v){for(var h=Math.max(this.g.length,v.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)&v.i(m);return new l(p,this.h&v.h)},n.or=function(v){for(var h=Math.max(this.g.length,v.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)|v.i(m);return new l(p,this.h|v.h)},n.xor=function(v){for(var h=Math.max(this.g.length,v.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)^v.i(m);return new l(p,this.h^v.h)};function Ze(v){for(var h=v.g.length+1,p=[],m=0;m<h;m++)p[m]=v.i(m)<<1|v.i(m-1)>>>31;return new l(p,v.h)}function ie(v,h){var p=h>>5;h%=32;for(var m=v.g.length-p,_=[],I=0;I<m;I++)_[I]=0<h?v.i(I+p)>>>h|v.i(I+p+1)<<32-h:v.i(I+p);return new l(_,v.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tu=eu.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=T,l.fromString=S,Er=eu.Integer=l}).apply(typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{});var wr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xe={};var nu,im,ru,iu,su,ou,au,cu,uu;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(r,o,a){return r==Array.prototype||r==Object.prototype||(r[o]=a.value),r};function t(r){r=[typeof globalThis=="object"&&globalThis,r,typeof window=="object"&&window,typeof self=="object"&&self,typeof wr=="object"&&wr];for(var o=0;o<r.length;++o){var a=r[o];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=t(this);function s(r,o){if(o)e:{var a=i;r=r.split(".");for(var u=0;u<r.length-1;u++){var y=r[u];if(!(y in a))break e;a=a[y]}r=r[r.length-1],u=a[r],o=o(u),o!=u&&o!=null&&e(a,r,{configurable:!0,writable:!0,value:o})}}function c(r,o){r instanceof String&&(r+="");var a=0,u=!1,y={next:function(){if(!u&&a<r.length){var w=a++;return{value:o(w,r[w]),done:!1}}return u=!0,{done:!0,value:void 0}}};return y[Symbol.iterator]=function(){return y},y}s("Array.prototype.values",function(r){return r||function(){return c(this,function(o,a){return a})}});var l=l||{},f=this||self;function g(r){var o=typeof r;return o=o!="object"?o:r?Array.isArray(r)?"array":o:"null",o=="array"||o=="object"&&typeof r.length=="number"}function T(r){var o=typeof r;return o=="object"&&r!=null||o=="function"}function S(r,o,a){return r.call.apply(r.bind,arguments)}function P(r,o,a){if(!r)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var y=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(y,u),r.apply(o,y)}}return function(){return r.apply(o,arguments)}}function A(r,o,a){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:P,A.apply(null,arguments)}function N(r,o){var a=Array.prototype.slice.call(arguments,1);return function(){var u=a.slice();return u.push.apply(u,arguments),r.apply(this,u)}}function O(r,o){function a(){}a.prototype=o.prototype,r.aa=o.prototype,r.prototype=new a,r.prototype.constructor=r,r.Qb=function(u,y,w){for(var b=Array(arguments.length-2),B=2;B<arguments.length;B++)b[B-2]=arguments[B];return o.prototype[y].apply(u,b)}}function $(r){let o=r.length;if(0<o){let a=Array(o);for(let u=0;u<o;u++)a[u]=r[u];return a}return[]}function U(r,o){for(let a=1;a<arguments.length;a++){let u=arguments[a];if(g(u)){let y=r.length||0,w=u.length||0;r.length=y+w;for(let b=0;b<w;b++)r[y+b]=u[b]}else r.push(u)}}class ue{constructor(o,a){this.i=o,this.j=a,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}function K(r){return/^[\s\xa0]*$/.test(r)}function W(){var r=f.navigator;return r&&(r=r.userAgent)?r:""}function oe(r){return oe[" "](r),r}oe[" "]=function(){};var Ze=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ie(r,o,a){for(let u in r)o.call(a,r[u],u,r)}function v(r,o){for(let a in r)o.call(void 0,r[a],a,r)}function h(r){let o={};for(let a in r)o[a]=r[a];return o}let p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m(r,o){let a,u;for(let y=1;y<arguments.length;y++){u=arguments[y];for(a in u)r[a]=u[a];for(let w=0;w<p.length;w++)a=p[w],Object.prototype.hasOwnProperty.call(u,a)&&(r[a]=u[a])}}function _(r){var o=1;r=r.split(":");let a=[];for(;0<o&&r.length;)a.push(r.shift()),o--;return r.length&&a.push(r.join(":")),a}function I(r){f.setTimeout(()=>{throw r},0)}function d(){var r=Vr;let o=null;return r.g&&(o=r.g,r.g=r.g.next,r.g||(r.h=null),o.next=null),o}class be{constructor(){this.h=this.g=null}add(o,a){let u=Vt.get();u.set(o,a),this.h?this.h.next=u:this.g=u,this.h=u}}var Vt=new ue(()=>new Zu,r=>r.reset());class Zu{constructor(){this.next=this.g=this.h=null}set(o,a){this.h=o,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,Lt=!1,Vr=new be,Hs=()=>{let r=f.Promise.resolve(void 0);Mt=()=>{r.then(el)}};var el=()=>{for(var r;r=d();){try{r.h.call(r.g)}catch(a){I(a)}var o=Vt;o.j(r),100>o.h&&(o.h++,r.next=o.g,o.g=r)}Lt=!1};function Le(){this.s=this.s,this.C=this.C}Le.prototype.s=!1,Le.prototype.ma=function(){this.s||(this.s=!0,this.N())},Le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(r,o){this.type=r,this.g=this.target=o,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var tl=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var r=!1,o=Object.defineProperty({},"passive",{get:function(){r=!0}});try{let a=()=>{};f.addEventListener("test",a,o),f.removeEventListener("test",a,o)}catch{}return r})();function Ft(r,o){if(J.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var a=this.type=r.type,u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=o,o=r.relatedTarget){if(Ze){e:{try{oe(o.nodeName);var y=!0;break e}catch{}y=!1}y||(o=null)}}else a=="mouseover"?o=r.fromElement:a=="mouseout"&&(o=r.toElement);this.relatedTarget=o,u?(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType=typeof r.pointerType=="string"?r.pointerType:nl[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&Ft.aa.h.call(this)}}O(Ft,J);var nl={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),rl=0;function il(r,o,a,u,y){this.listener=r,this.proxy=null,this.src=o,this.type=a,this.capture=!!u,this.ha=y,this.key=++rl,this.da=this.fa=!1}function Rn(r){r.da=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function Cn(r){this.src=r,this.g={},this.h=0}Cn.prototype.add=function(r,o,a,u,y){var w=r.toString();r=this.g[w],r||(r=this.g[w]=[],this.h++);var b=Lr(r,o,u,y);return-1<b?(o=r[b],a||(o.fa=!1)):(o=new il(o,this.src,w,!!u,y),o.fa=a,r.push(o)),o};function Mr(r,o){var a=o.type;if(a in r.g){var u=r.g[a],y=Array.prototype.indexOf.call(u,o,void 0),w;(w=0<=y)&&Array.prototype.splice.call(u,y,1),w&&(Rn(o),r.g[a].length==0&&(delete r.g[a],r.h--))}}function Lr(r,o,a,u){for(var y=0;y<r.length;++y){var w=r[y];if(!w.da&&w.listener==o&&w.capture==!!a&&w.ha==u)return y}return-1}var Fr="closure_lm_"+(1e6*Math.random()|0),Ur={};function Qs(r,o,a,u,y){if(u&&u.once)return Js(r,o,a,u,y);if(Array.isArray(o)){for(var w=0;w<o.length;w++)Qs(r,o[w],a,u,y);return null}return a=jr(a),r&&r[Ut]?r.K(o,a,T(u)?!!u.capture:!!u,y):Ys(r,o,a,!1,u,y)}function Ys(r,o,a,u,y,w){if(!o)throw Error("Invalid event type");var b=T(y)?!!y.capture:!!y,B=qr(r);if(B||(r[Fr]=B=new Cn(r)),a=B.add(o,a,u,b,w),a.proxy)return a;if(u=sl(),a.proxy=u,u.src=r,u.listener=a,r.addEventListener)tl||(y=b),y===void 0&&(y=!1),r.addEventListener(o.toString(),u,y);else if(r.attachEvent)r.attachEvent(Zs(o.toString()),u);else if(r.addListener&&r.removeListener)r.addListener(u);else throw Error("addEventListener and attachEvent are unavailable.");return a}function sl(){function r(a){return o.call(r.src,r.listener,a)}let o=ol;return r}function Js(r,o,a,u,y){if(Array.isArray(o)){for(var w=0;w<o.length;w++)Js(r,o[w],a,u,y);return null}return a=jr(a),r&&r[Ut]?r.L(o,a,T(u)?!!u.capture:!!u,y):Ys(r,o,a,!0,u,y)}function Xs(r,o,a,u,y){if(Array.isArray(o))for(var w=0;w<o.length;w++)Xs(r,o[w],a,u,y);else u=T(u)?!!u.capture:!!u,a=jr(a),r&&r[Ut]?(r=r.i,o=String(o).toString(),o in r.g&&(w=r.g[o],a=Lr(w,a,u,y),-1<a&&(Rn(w[a]),Array.prototype.splice.call(w,a,1),w.length==0&&(delete r.g[o],r.h--)))):r&&(r=qr(r))&&(o=r.g[o.toString()],r=-1,o&&(r=Lr(o,a,u,y)),(a=-1<r?o[r]:null)&&Br(a))}function Br(r){if(typeof r!="number"&&r&&!r.da){var o=r.src;if(o&&o[Ut])Mr(o.i,r);else{var a=r.type,u=r.proxy;o.removeEventListener?o.removeEventListener(a,u,r.capture):o.detachEvent?o.detachEvent(Zs(a),u):o.addListener&&o.removeListener&&o.removeListener(u),(a=qr(o))?(Mr(a,r),a.h==0&&(a.src=null,o[Fr]=null)):Rn(r)}}}function Zs(r){return r in Ur?Ur[r]:Ur[r]="on"+r}function ol(r,o){if(r.da)r=!0;else{o=new Ft(o,this);var a=r.listener,u=r.ha||r.src;r.fa&&Br(r),r=a.call(u,o)}return r}function qr(r){return r=r[Fr],r instanceof Cn?r:null}var $r="__closure_events_fn_"+(1e9*Math.random()>>>0);function jr(r){return typeof r=="function"?r:(r[$r]||(r[$r]=function(o){return r.handleEvent(o)}),r[$r])}function X(){Le.call(this),this.i=new Cn(this),this.M=this,this.F=null}O(X,Le),X.prototype[Ut]=!0,X.prototype.removeEventListener=function(r,o,a,u){Xs(this,r,o,a,u)};function te(r,o){var a,u=r.F;if(u)for(a=[];u;u=u.F)a.push(u);if(r=r.M,u=o.type||o,typeof o=="string")o=new J(o,r);else if(o instanceof J)o.target=o.target||r;else{var y=o;o=new J(u,r),m(o,y)}if(y=!0,a)for(var w=a.length-1;0<=w;w--){var b=o.g=a[w];y=kn(b,u,!0,o)&&y}if(b=o.g=r,y=kn(b,u,!0,o)&&y,y=kn(b,u,!1,o)&&y,a)for(w=0;w<a.length;w++)b=o.g=a[w],y=kn(b,u,!1,o)&&y}X.prototype.N=function(){if(X.aa.N.call(this),this.i){var r=this.i,o;for(o in r.g){for(var a=r.g[o],u=0;u<a.length;u++)Rn(a[u]);delete r.g[o],r.h--}}this.F=null},X.prototype.K=function(r,o,a,u){return this.i.add(String(r),o,!1,a,u)},X.prototype.L=function(r,o,a,u){return this.i.add(String(r),o,!0,a,u)};function kn(r,o,a,u){if(o=r.i.g[String(o)],!o)return!0;o=o.concat();for(var y=!0,w=0;w<o.length;++w){var b=o[w];if(b&&!b.da&&b.capture==a){var B=b.listener,H=b.ha||b.src;b.fa&&Mr(r.i,b),y=B.call(H,u)!==!1&&y}}return y&&!u.defaultPrevented}function eo(r,o,a){if(typeof r=="function")a&&(r=A(r,a));else if(r&&typeof r.handleEvent=="function")r=A(r.handleEvent,r);else throw Error("Invalid listener argument");return 2147483647<Number(o)?-1:f.setTimeout(r,o||0)}function to(r){r.g=eo(()=>{r.g=null,r.i&&(r.i=!1,to(r))},r.l);let o=r.h;r.h=null,r.m.apply(null,o)}class al extends Le{constructor(o,a){super(),this.m=o,this.l=a,this.h=null,this.i=!1,this.g=null}j(o){this.h=arguments,this.g?this.i=!0:to(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(r){Le.call(this),this.h=r,this.g={}}O(Bt,Le);var no=[];function ro(r){ie(r.g,function(o,a){this.g.hasOwnProperty(a)&&Br(o)},r),r.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),ro(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zr=f.JSON.stringify,cl=f.JSON.parse,ul=class{stringify(r){return f.JSON.stringify(r,void 0)}parse(r){return f.JSON.parse(r,void 0)}};function Wr(){}Wr.prototype.h=null;function io(r){return r.h||(r.h=r.i())}function so(){}var qt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gr(){J.call(this,"d")}O(Gr,J);function Kr(){J.call(this,"c")}O(Kr,J);var et={},oo=null;function Dn(){return oo=oo||new X}et.La="serverreachability";function ao(r){J.call(this,et.La,r)}O(ao,J);function $t(r){let o=Dn();te(o,new ao(o))}et.STAT_EVENT="statevent";function co(r,o){J.call(this,et.STAT_EVENT,r),this.stat=o}O(co,J);function ne(r){let o=Dn();te(o,new co(o,r))}et.Ma="timingevent";function uo(r,o){J.call(this,et.Ma,r),this.size=o}O(uo,J);function jt(r,o){if(typeof r!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){r()},o)}function zt(){this.g=!0}zt.prototype.xa=function(){this.g=!1};function ll(r,o,a,u,y,w){r.info(function(){if(r.g)if(w)for(var b="",B=w.split("&"),H=0;H<B.length;H++){var L=B[H].split("=");if(1<L.length){var Z=L[0];L=L[1];var ee=Z.split("_");b=2<=ee.length&&ee[1]=="type"?b+(Z+"="+L+"&"):b+(Z+"=redacted&")}}else b=null;else b=w;return"XMLHTTP REQ ("+u+") [attempt "+y+"]: "+o+`
`+a+`
`+b})}function hl(r,o,a,u,y,w,b){r.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+y+"]: "+o+`
`+a+`
`+w+" "+b})}function yt(r,o,a,u){r.info(function(){return"XMLHTTP TEXT ("+o+"): "+fl(r,a)+(u?" "+u:"")})}function dl(r,o){r.info(function(){return"TIMEOUT: "+o})}zt.prototype.info=function(){};function fl(r,o){if(!r.g)return o;if(!o)return null;try{var a=JSON.parse(o);if(a){for(r=0;r<a.length;r++)if(Array.isArray(a[r])){var u=a[r];if(!(2>u.length)){var y=u[1];if(Array.isArray(y)&&!(1>y.length)){var w=y[0];if(w!="noop"&&w!="stop"&&w!="close")for(var b=1;b<y.length;b++)y[b]=""}}}}return zr(a)}catch{return o}}var Nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hr;function On(){}O(On,Wr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Hr=new On;function Fe(r,o,a,u){this.j=r,this.i=o,this.l=a,this.R=u||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ho}function ho(){this.i=null,this.g="",this.h=!1}var fo={},Qr={};function Yr(r,o,a){r.L=1,r.v=Ln(Se(o)),r.m=a,r.P=!0,po(r,null)}function po(r,o){r.F=Date.now(),xn(r),r.A=Se(r.v);var a=r.A,u=r.R;Array.isArray(u)||(u=[String(u)]),Ro(a.i,"t",u),r.C=0,a=r.j.J,r.h=new ho,r.g=Go(r.j,a?o:null,!r.m),0<r.O&&(r.M=new al(A(r.Y,r,r.g),r.O)),o=r.U,a=r.g,u=r.ca;var y="readystatechange";Array.isArray(y)||(y&&(no[0]=y.toString()),y=no);for(var w=0;w<y.length;w++){var b=Qs(a,y[w],u||o.handleEvent,!1,o.h||o);if(!b)break;o.g[b.key]=b}o=r.H?h(r.H):{},r.m?(r.u||(r.u="POST"),o["Content-Type"]="application/x-www-form-urlencoded",r.g.ea(r.A,r.u,r.m,o)):(r.u="GET",r.g.ea(r.A,r.u,null,o)),$t(),ll(r.i,r.u,r.A,r.l,r.R,r.m)}Fe.prototype.ca=function(r){r=r.target;let o=this.M;o&&Pe(r)==3?o.j():this.Y(r)},Fe.prototype.Y=function(r){try{if(r==this.g)e:{let ee=Pe(this.g);var o=this.g.Ba();let Et=this.g.Z();if(!(3>ee)&&(ee!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||ee!=4||o==7||(o==8||0>=Et?$t(3):$t(2)),Jr(this);var a=this.g.Z();this.X=a;t:if(mo(this)){var u=Vo(this.g);r="";var y=u.length,w=Pe(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tt(this),Wt(this);var b="";break t}this.h.i=new f.TextDecoder}for(o=0;o<y;o++)this.h.h=!0,r+=this.h.i.decode(u[o],{stream:!(w&&o==y-1)});u.length=0,this.h.g+=r,this.C=0,b=this.h.g}else b=this.g.oa();if(this.o=a==200,hl(this.i,this.u,this.A,this.l,this.R,ee,a),this.o){if(this.T&&!this.K){t:{if(this.g){var B,H=this.g;if((B=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(B)){var L=B;break t}}L=null}if(a=L)yt(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xr(this,a);else{this.o=!1,this.s=3,ne(12),tt(this),Wt(this);break e}}if(this.P){a=!0;let fe;for(;!this.J&&this.C<b.length;)if(fe=pl(this,b),fe==Qr){ee==4&&(this.s=4,ne(14),a=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(fe==fo){this.s=4,ne(15),yt(this.i,this.l,b,"[Invalid Chunk]"),a=!1;break}else yt(this.i,this.l,fe,null),Xr(this,fe);if(mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||b.length!=0||this.h.h||(this.s=1,ne(16),a=!1),this.o=this.o&&a,!a)yt(this.i,this.l,b,"[Invalid Chunked Response]"),tt(this),Wt(this);else if(0<b.length&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.ba&&!Z.M&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ii(Z),Z.M=!0,ne(11))}}else yt(this.i,this.l,b,null),Xr(this,b);ee==4&&tt(this),this.o&&!this.J&&(ee==4?$o(this.j,this):(this.o=!1,xn(this)))}else Dl(this.g),a==400&&0<b.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),tt(this),Wt(this)}}}catch{}finally{}};function mo(r){return r.g?r.u=="GET"&&r.L!=2&&r.j.Ca:!1}function pl(r,o){var a=r.C,u=o.indexOf(`
`,a);return u==-1?Qr:(a=Number(o.substring(a,u)),isNaN(a)?fo:(u+=1,u+a>o.length?Qr:(o=o.slice(u,u+a),r.C=u+a,o)))}Fe.prototype.cancel=function(){this.J=!0,tt(this)};function xn(r){r.S=Date.now()+r.I,go(r,r.I)}function go(r,o){if(r.B!=null)throw Error("WatchDog timer not null");r.B=jt(A(r.ba,r),o)}function Jr(r){r.B&&(f.clearTimeout(r.B),r.B=null)}Fe.prototype.ba=function(){this.B=null;let r=Date.now();0<=r-this.S?(dl(this.i,this.A),this.L!=2&&($t(),ne(17)),tt(this),this.s=2,Wt(this)):go(this,this.S-r)};function Wt(r){r.j.G==0||r.J||$o(r.j,r)}function tt(r){Jr(r);var o=r.M;o&&typeof o.ma=="function"&&o.ma(),r.M=null,ro(r.U),r.g&&(o=r.g,r.g=null,o.abort(),o.ma())}function Xr(r,o){try{var a=r.j;if(a.G!=0&&(a.g==r||Zr(a.h,r))){if(!r.K&&Zr(a.h,r)&&a.G==3){try{var u=a.Da.g.parse(o)}catch{u=null}if(Array.isArray(u)&&u.length==3){var y=u;if(y[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<r.F)$n(a),Bn(a);else break e;ri(a),ne(18)}}else a.za=y[1],0<a.za-a.T&&37500>y[2]&&a.F&&a.v==0&&!a.C&&(a.C=jt(A(a.Za,a),6e3));if(1>=vo(a.h)&&a.ca){try{a.ca()}catch{}a.ca=void 0}}else rt(a,11)}else if((r.K||a.g==r)&&$n(a),!K(o))for(y=a.Da.g.parse(o),o=0;o<y.length;o++){let L=y[o];if(a.T=L[0],L=L[1],a.G==2)if(L[0]=="c"){a.K=L[1],a.ia=L[2];let Z=L[3];Z!=null&&(a.la=Z,a.j.info("VER="+a.la));let ee=L[4];ee!=null&&(a.Aa=ee,a.j.info("SVER="+a.Aa));let Et=L[5];Et!=null&&typeof Et=="number"&&0<Et&&(u=1.5*Et,a.L=u,a.j.info("backChannelRequestTimeoutMs_="+u)),u=a;let fe=r.g;if(fe){let zn=fe.g?fe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zn){var w=u.h;w.g||zn.indexOf("spdy")==-1&&zn.indexOf("quic")==-1&&zn.indexOf("h2")==-1||(w.j=w.l,w.g=new Set,w.h&&(ei(w,w.h),w.h=null))}if(u.D){let si=fe.g?fe.g.getResponseHeader("X-HTTP-Session-Id"):null;si&&(u.ya=si,q(u.I,u.D,si))}}a.G=3,a.l&&a.l.ua(),a.ba&&(a.R=Date.now()-r.F,a.j.info("Handshake RTT: "+a.R+"ms")),u=a;var b=r;if(u.qa=Wo(u,u.J?u.ia:null,u.W),b.K){Io(u.h,b);var B=b,H=u.L;H&&(B.I=H),B.B&&(Jr(B),xn(B)),u.g=b}else Bo(u);0<a.i.length&&qn(a)}else L[0]!="stop"&&L[0]!="close"||rt(a,7);else a.G==3&&(L[0]=="stop"||L[0]=="close"?L[0]=="stop"?rt(a,7):ni(a):L[0]!="noop"&&a.l&&a.l.ta(L),a.v=0)}}$t(4)}catch{}}var ml=class{constructor(r,o){this.g=r,this.map=o}};function _o(r){this.l=r||10,f.PerformanceNavigationTiming?(r=f.performance.getEntriesByType("navigation"),r=0<r.length&&(r[0].nextHopProtocol=="hq"||r[0].nextHopProtocol=="h2")):r=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yo(r){return r.h?!0:r.g?r.g.size>=r.j:!1}function vo(r){return r.h?1:r.g?r.g.size:0}function Zr(r,o){return r.h?r.h==o:r.g?r.g.has(o):!1}function ei(r,o){r.g?r.g.add(o):r.h=o}function Io(r,o){r.h&&r.h==o?r.h=null:r.g&&r.g.has(o)&&r.g.delete(o)}_o.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let r of this.g.values())r.cancel();this.g.clear()}};function Eo(r){if(r.h!=null)return r.i.concat(r.h.D);if(r.g!=null&&r.g.size!==0){let o=r.i;for(let a of r.g.values())o=o.concat(a.D);return o}return $(r.i)}function gl(r){if(r.V&&typeof r.V=="function")return r.V();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if(typeof r=="string")return r.split("");if(g(r)){for(var o=[],a=r.length,u=0;u<a;u++)o.push(r[u]);return o}o=[],a=0;for(u in r)o[a++]=r[u];return o}function _l(r){if(r.na&&typeof r.na=="function")return r.na();if(!r.V||typeof r.V!="function"){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(g(r)||typeof r=="string"){var o=[];r=r.length;for(var a=0;a<r;a++)o.push(a);return o}o=[],a=0;for(let u in r)o[a++]=u;return o}}}function wo(r,o){if(r.forEach&&typeof r.forEach=="function")r.forEach(o,void 0);else if(g(r)||typeof r=="string")Array.prototype.forEach.call(r,o,void 0);else for(var a=_l(r),u=gl(r),y=u.length,w=0;w<y;w++)o.call(void 0,u[w],a&&a[w],r)}var To=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yl(r,o){if(r){r=r.split("&");for(var a=0;a<r.length;a++){var u=r[a].indexOf("="),y=null;if(0<=u){var w=r[a].substring(0,u);y=r[a].substring(u+1)}else w=r[a];o(w,y?decodeURIComponent(y.replace(/\+/g," ")):"")}}}function nt(r){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,r instanceof nt){this.h=r.h,Vn(this,r.j),this.o=r.o,this.g=r.g,Mn(this,r.s),this.l=r.l;var o=r.i,a=new Ht;a.i=o.i,o.g&&(a.g=new Map(o.g),a.h=o.h),Ao(this,a),this.m=r.m}else r&&(o=String(r).match(To))?(this.h=!1,Vn(this,o[1]||"",!0),this.o=Gt(o[2]||""),this.g=Gt(o[3]||"",!0),Mn(this,o[4]),this.l=Gt(o[5]||"",!0),Ao(this,o[6]||"",!0),this.m=Gt(o[7]||"")):(this.h=!1,this.i=new Ht(null,this.h))}nt.prototype.toString=function(){var r=[],o=this.j;o&&r.push(Kt(o,bo,!0),":");var a=this.g;return(a||o=="file")&&(r.push("//"),(o=this.o)&&r.push(Kt(o,bo,!0),"@"),r.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.s,a!=null&&r.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&r.push("/"),r.push(Kt(a,a.charAt(0)=="/"?El:Il,!0))),(a=this.i.toString())&&r.push("?",a),(a=this.m)&&r.push("#",Kt(a,Tl)),r.join("")};function Se(r){return new nt(r)}function Vn(r,o,a){r.j=a?Gt(o,!0):o,r.j&&(r.j=r.j.replace(/:$/,""))}function Mn(r,o){if(o){if(o=Number(o),isNaN(o)||0>o)throw Error("Bad port number "+o);r.s=o}else r.s=null}function Ao(r,o,a){o instanceof Ht?(r.i=o,Al(r.i,r.h)):(a||(o=Kt(o,wl)),r.i=new Ht(o,r.h))}function q(r,o,a){r.i.set(o,a)}function Ln(r){return q(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Gt(r,o){return r?o?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function Kt(r,o,a){return typeof r=="string"?(r=encodeURI(r).replace(o,vl),a&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function vl(r){return r=r.charCodeAt(0),"%"+(r>>4&15).toString(16)+(r&15).toString(16)}var bo=/[#\/\?@]/g,Il=/[#\?:]/g,El=/[#\?]/g,wl=/[#\?@]/g,Tl=/#/g;function Ht(r,o){this.h=this.g=null,this.i=r||null,this.j=!!o}function Ue(r){r.g||(r.g=new Map,r.h=0,r.i&&yl(r.i,function(o,a){r.add(decodeURIComponent(o.replace(/\+/g," ")),a)}))}n=Ht.prototype,n.add=function(r,o){Ue(this),this.i=null,r=vt(this,r);var a=this.g.get(r);return a||this.g.set(r,a=[]),a.push(o),this.h+=1,this};function So(r,o){Ue(r),o=vt(r,o),r.g.has(o)&&(r.i=null,r.h-=r.g.get(o).length,r.g.delete(o))}function Po(r,o){return Ue(r),o=vt(r,o),r.g.has(o)}n.forEach=function(r,o){Ue(this),this.g.forEach(function(a,u){a.forEach(function(y){r.call(o,y,u,this)},this)},this)},n.na=function(){Ue(this);let r=Array.from(this.g.values()),o=Array.from(this.g.keys()),a=[];for(let u=0;u<o.length;u++){let y=r[u];for(let w=0;w<y.length;w++)a.push(o[u])}return a},n.V=function(r){Ue(this);let o=[];if(typeof r=="string")Po(this,r)&&(o=o.concat(this.g.get(vt(this,r))));else{r=Array.from(this.g.values());for(let a=0;a<r.length;a++)o=o.concat(r[a])}return o},n.set=function(r,o){return Ue(this),this.i=null,r=vt(this,r),Po(this,r)&&(this.h-=this.g.get(r).length),this.g.set(r,[o]),this.h+=1,this},n.get=function(r,o){return r?(r=this.V(r),0<r.length?String(r[0]):o):o};function Ro(r,o,a){So(r,o),0<a.length&&(r.i=null,r.g.set(vt(r,o),$(a)),r.h+=a.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let r=[],o=Array.from(this.g.keys());for(var a=0;a<o.length;a++){var u=o[a];let w=encodeURIComponent(String(u)),b=this.V(u);for(u=0;u<b.length;u++){var y=w;b[u]!==""&&(y+="="+encodeURIComponent(String(b[u]))),r.push(y)}}return this.i=r.join("&")};function vt(r,o){return o=String(o),r.j&&(o=o.toLowerCase()),o}function Al(r,o){o&&!r.j&&(Ue(r),r.i=null,r.g.forEach(function(a,u){var y=u.toLowerCase();u!=y&&(So(this,u),Ro(this,y,a))},r)),r.j=o}function bl(r,o){let a=new zt;if(f.Image){let u=new Image;u.onload=N(Be,a,"TestLoadImage: loaded",!0,o,u),u.onerror=N(Be,a,"TestLoadImage: error",!1,o,u),u.onabort=N(Be,a,"TestLoadImage: abort",!1,o,u),u.ontimeout=N(Be,a,"TestLoadImage: timeout",!1,o,u),f.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=r}else o(!1)}function Sl(r,o){let a=new zt,u=new AbortController,y=setTimeout(()=>{u.abort(),Be(a,"TestPingServer: timeout",!1,o)},1e4);fetch(r,{signal:u.signal}).then(w=>{clearTimeout(y),w.ok?Be(a,"TestPingServer: ok",!0,o):Be(a,"TestPingServer: server error",!1,o)}).catch(()=>{clearTimeout(y),Be(a,"TestPingServer: error",!1,o)})}function Be(r,o,a,u,y){try{y&&(y.onload=null,y.onerror=null,y.onabort=null,y.ontimeout=null),u(a)}catch{}}function Pl(){this.g=new ul}function Rl(r,o,a){let u=a||"";try{wo(r,function(y,w){let b=y;T(y)&&(b=zr(y)),o.push(u+w+"="+encodeURIComponent(b))})}catch(y){throw o.push(u+"type="+encodeURIComponent("_badmap")),y}}function Qt(r){this.l=r.Ub||null,this.j=r.eb||!1}O(Qt,Wr),Qt.prototype.g=function(){return new Fn(this.l,this.j)},Qt.prototype.i=(function(r){return function(){return r}})({});function Fn(r,o){X.call(this),this.D=r,this.o=o,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Fn,X),n=Fn.prototype,n.open=function(r,o){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=r,this.A=o,this.readyState=1,Jt(this)},n.send=function(r){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let o={headers:this.u,method:this.B,credentials:this.m,cache:void 0};r&&(o.body=r),(this.D||f).fetch(new Request(this.A,o)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yt(this)),this.readyState=0},n.Sa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Jt(this)),this.g&&(this.readyState=3,Jt(this),this.g)))if(this.responseType==="arraybuffer")r.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Co(this)}else r.text().then(this.Ra.bind(this),this.ga.bind(this))};function Co(r){r.j.read().then(r.Pa.bind(r)).catch(r.ga.bind(r))}n.Pa=function(r){if(this.g){if(this.o&&r.value)this.response.push(r.value);else if(!this.o){var o=r.value?r.value:new Uint8Array(0);(o=this.v.decode(o,{stream:!r.done}))&&(this.response=this.responseText+=o)}r.done?Yt(this):Jt(this),this.readyState==3&&Co(this)}},n.Ra=function(r){this.g&&(this.response=this.responseText=r,Yt(this))},n.Qa=function(r){this.g&&(this.response=r,Yt(this))},n.ga=function(){this.g&&Yt(this)};function Yt(r){r.readyState=4,r.l=null,r.j=null,r.v=null,Jt(r)}n.setRequestHeader=function(r,o){this.u.append(r,o)},n.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let r=[],o=this.h.entries();for(var a=o.next();!a.done;)a=a.value,r.push(a[0]+": "+a[1]),a=o.next();return r.join(`\r
`)};function Jt(r){r.onreadystatechange&&r.onreadystatechange.call(r)}Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(r){this.m=r?"include":"same-origin"}});function ko(r){let o="";return ie(r,function(a,u){o+=u,o+=":",o+=a,o+=`\r
`}),o}function ti(r,o,a){e:{for(u in a){var u=!1;break e}u=!0}u||(a=ko(a),typeof r=="string"?a!=null&&encodeURIComponent(String(a)):q(r,o,a))}function j(r){X.call(this),this.headers=new Map,this.o=r||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(j,X);var Cl=/^https?$/i,kl=["POST","PUT"];n=j.prototype,n.Ha=function(r){this.J=r},n.ea=function(r,o,a,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+r);o=o?o.toUpperCase():"GET",this.D=r,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hr.g(),this.v=this.o?io(this.o):io(Hr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(o,String(r),!0),this.B=!1}catch(w){Do(this,w);return}if(r=a||"",a=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var y in u)a.set(y,u[y]);else if(typeof u.keys=="function"&&typeof u.get=="function")for(let w of u.keys())a.set(w,u.get(w));else throw Error("Unknown input type for opt_headers: "+String(u));u=Array.from(a.keys()).find(w=>w.toLowerCase()=="content-type"),y=f.FormData&&r instanceof f.FormData,!(0<=Array.prototype.indexOf.call(kl,o,void 0))||u||y||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[w,b]of a)this.g.setRequestHeader(w,b);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xo(this),this.u=!0,this.g.send(r),this.u=!1}catch(w){Do(this,w)}};function Do(r,o){r.h=!1,r.g&&(r.j=!0,r.g.abort(),r.j=!1),r.l=o,r.m=5,No(r),Un(r)}function No(r){r.A||(r.A=!0,te(r,"complete"),te(r,"error"))}n.abort=function(r){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=r||7,te(this,"complete"),te(this,"abort"),Un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),j.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Oo(this):this.bb())},n.bb=function(){Oo(this)};function Oo(r){if(r.h&&typeof l<"u"&&(!r.v[1]||Pe(r)!=4||r.Z()!=2)){if(r.u&&Pe(r)==4)eo(r.Ea,0,r);else if(te(r,"readystatechange"),Pe(r)==4){r.h=!1;try{let b=r.Z();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var o=!0;break e;default:o=!1}var a;if(!(a=o)){var u;if(u=b===0){var y=String(r.D).match(To)[1]||null;!y&&f.self&&f.self.location&&(y=f.self.location.protocol.slice(0,-1)),u=!Cl.test(y?y.toLowerCase():"")}a=u}if(a)te(r,"complete"),te(r,"success");else{r.m=6;try{var w=2<Pe(r)?r.g.statusText:""}catch{w=""}r.l=w+" ["+r.Z()+"]",No(r)}}finally{Un(r)}}}}function Un(r,o){if(r.g){xo(r);let a=r.g,u=r.v[0]?()=>{}:null;r.g=null,r.v=null,o||te(r,"ready");try{a.onreadystatechange=u}catch{}}}function xo(r){r.I&&(f.clearTimeout(r.I),r.I=null)}n.isActive=function(){return!!this.g};function Pe(r){return r.g?r.g.readyState:0}n.Z=function(){try{return 2<Pe(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(r){if(this.g){var o=this.g.responseText;return r&&o.indexOf(r)==0&&(o=o.substring(r.length)),cl(o)}};function Vo(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.H){case"":case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(r){let o={};r=(r.g&&2<=Pe(r)&&r.g.getAllResponseHeaders()||"").split(`\r
`);for(let u=0;u<r.length;u++){if(K(r[u]))continue;var a=_(r[u]);let y=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();let w=o[y]||[];o[y]=w,w.push(a)}v(o,function(u){return u.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xt(r,o,a){return a&&a.internalChannelParams&&a.internalChannelParams[r]||o}function Mo(r){this.Aa=0,this.i=[],this.j=new zt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,r),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,r),this.cb=Xt("retryDelaySeedMs",1e4,r),this.Wa=Xt("forwardChannelMaxRetries",2,r),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,r),this.pa=r&&r.xmlHttpFactory||void 0,this.Xa=r&&r.Tb||void 0,this.Ca=r&&r.useFetchStreams||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.h=new _o(r&&r.concurrentRequestLimit),this.Da=new Pl,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=r&&r.Rb||!1,r&&r.xa&&this.j.xa(),r&&r.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&r&&r.detectBufferingProxy||!1,this.ja=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.ja=r.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mo.prototype,n.la=8,n.G=1,n.connect=function(r,o,a,u){ne(0),this.W=r,this.H=o||{},a&&u!==void 0&&(this.H.OSID=a,this.H.OAID=u),this.F=this.X,this.I=Wo(this,null,this.W),qn(this)};function ni(r){if(Lo(r),r.G==3){var o=r.U++,a=Se(r.I);if(q(a,"SID",r.K),q(a,"RID",o),q(a,"TYPE","terminate"),Zt(r,a),o=new Fe(r,r.j,o),o.L=2,o.v=Ln(Se(a)),a=!1,f.navigator&&f.navigator.sendBeacon)try{a=f.navigator.sendBeacon(o.v.toString(),"")}catch{}!a&&f.Image&&(new Image().src=o.v,a=!0),a||(o.g=Go(o.j,null),o.g.ea(o.v)),o.F=Date.now(),xn(o)}zo(r)}function Bn(r){r.g&&(ii(r),r.g.cancel(),r.g=null)}function Lo(r){Bn(r),r.u&&(f.clearTimeout(r.u),r.u=null),$n(r),r.h.cancel(),r.s&&(typeof r.s=="number"&&f.clearTimeout(r.s),r.s=null)}function qn(r){if(!yo(r.h)&&!r.s){r.s=!0;var o=r.Ga;Mt||Hs(),Lt||(Mt(),Lt=!0),Vr.add(o,r),r.B=0}}function Nl(r,o){return vo(r.h)>=r.h.j-(r.s?1:0)?!1:r.s?(r.i=o.D.concat(r.i),!0):r.G==1||r.G==2||r.B>=(r.Va?0:r.Wa)?!1:(r.s=jt(A(r.Ga,r,o),jo(r,r.B)),r.B++,!0)}n.Ga=function(r){if(this.s)if(this.s=null,this.G==1){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;let y=new Fe(this,this.j,r),w=this.o;if(this.S&&(w?(w=h(w),m(w,this.S)):w=this.S),this.m!==null||this.O||(y.H=w,w=null),this.P)e:{for(var o=0,a=0;a<this.i.length;a++){t:{var u=this.i[a];if("__data__"in u.map&&(u=u.map.__data__,typeof u=="string")){u=u.length;break t}u=void 0}if(u===void 0)break;if(o+=u,4096<o){o=a;break e}if(o===4096||a===this.i.length-1){o=a+1;break e}}o=1e3}else o=1e3;o=Uo(this,y,o),a=Se(this.I),q(a,"RID",r),q(a,"CVER",22),this.D&&q(a,"X-HTTP-Session-Id",this.D),Zt(this,a),w&&(this.O?o="headers="+encodeURIComponent(String(ko(w)))+"&"+o:this.m&&ti(a,this.m,w)),ei(this.h,y),this.Ua&&q(a,"TYPE","init"),this.P?(q(a,"$req",o),q(a,"SID","null"),y.T=!0,Yr(y,a,null)):Yr(y,a,o),this.G=2}}else this.G==3&&(r?Fo(this,r):this.i.length==0||yo(this.h)||Fo(this))};function Fo(r,o){var a;o?a=o.l:a=r.U++;let u=Se(r.I);q(u,"SID",r.K),q(u,"RID",a),q(u,"AID",r.T),Zt(r,u),r.m&&r.o&&ti(u,r.m,r.o),a=new Fe(r,r.j,a,r.B+1),r.m===null&&(a.H=r.o),o&&(r.i=o.D.concat(r.i)),o=Uo(r,a,1e3),a.I=Math.round(.5*r.wa)+Math.round(.5*r.wa*Math.random()),ei(r.h,a),Yr(a,u,o)}function Zt(r,o){r.H&&ie(r.H,function(a,u){q(o,u,a)}),r.l&&wo({},function(a,u){q(o,u,a)})}function Uo(r,o,a){a=Math.min(r.i.length,a);var u=r.l?A(r.l.Na,r.l,r):null;e:{var y=r.i;let w=-1;for(;;){let b=["count="+a];w==-1?0<a?(w=y[0].g,b.push("ofs="+w)):w=0:b.push("ofs="+w);let B=!0;for(let H=0;H<a;H++){let L=y[H].g,Z=y[H].map;if(L-=w,0>L)w=Math.max(0,y[H].g-100),B=!1;else try{Rl(Z,b,"req"+L+"_")}catch{u&&u(Z)}}if(B){u=b.join("&");break e}}}return r=r.i.splice(0,a),o.D=r,u}function Bo(r){if(!r.g&&!r.u){r.Y=1;var o=r.Fa;Mt||Hs(),Lt||(Mt(),Lt=!0),Vr.add(o,r),r.v=0}}function ri(r){return r.g||r.u||3<=r.v?!1:(r.Y++,r.u=jt(A(r.Fa,r),jo(r,r.v)),r.v++,!0)}n.Fa=function(){if(this.u=null,qo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var r=2*this.R;this.j.info("BP detection timer enabled: "+r),this.A=jt(A(this.ab,this),r)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Bn(this),qo(this))};function ii(r){r.A!=null&&(f.clearTimeout(r.A),r.A=null)}function qo(r){r.g=new Fe(r,r.j,"rpc",r.Y),r.m===null&&(r.g.H=r.o),r.g.O=0;var o=Se(r.qa);q(o,"RID","rpc"),q(o,"SID",r.K),q(o,"AID",r.T),q(o,"CI",r.F?"0":"1"),!r.F&&r.ja&&q(o,"TO",r.ja),q(o,"TYPE","xmlhttp"),Zt(r,o),r.m&&r.o&&ti(o,r.m,r.o),r.L&&(r.g.I=r.L);var a=r.g;r=r.ia,a.L=1,a.v=Ln(Se(o)),a.m=null,a.P=!0,po(a,r)}n.Za=function(){this.C!=null&&(this.C=null,Bn(this),ri(this),ne(19))};function $n(r){r.C!=null&&(f.clearTimeout(r.C),r.C=null)}function $o(r,o){var a=null;if(r.g==o){$n(r),ii(r),r.g=null;var u=2}else if(Zr(r.h,o))a=o.D,Io(r.h,o),u=1;else return;if(r.G!=0){if(o.o)if(u==1){a=o.m?o.m.length:0,o=Date.now()-o.F;var y=r.B;u=Dn(),te(u,new uo(u,a)),qn(r)}else Bo(r);else if(y=o.s,y==3||y==0&&0<o.X||!(u==1&&Nl(r,o)||u==2&&ri(r)))switch(a&&0<a.length&&(o=r.h,o.i=o.i.concat(a)),y){case 1:rt(r,5);break;case 4:rt(r,10);break;case 3:rt(r,6);break;default:rt(r,2)}}}function jo(r,o){let a=r.Ta+Math.floor(Math.random()*r.cb);return r.isActive()||(a*=2),a*o}function rt(r,o){if(r.j.info("Error code "+o),o==2){var a=A(r.fb,r),u=r.Xa;let y=!u;u=new nt(u||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Vn(u,"https"),Ln(u),y?bl(u.toString(),a):Sl(u.toString(),a)}else ne(2);r.G=0,r.l&&r.l.sa(o),zo(r),Lo(r)}n.fb=function(r){r?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function zo(r){if(r.G=0,r.ka=[],r.l){let o=Eo(r.h);(o.length!=0||r.i.length!=0)&&(U(r.ka,o),U(r.ka,r.i),r.h.i.length=0,$(r.i),r.i.length=0),r.l.ra()}}function Wo(r,o,a){var u=a instanceof nt?Se(a):new nt(a);if(u.g!="")o&&(u.g=o+"."+u.g),Mn(u,u.s);else{var y=f.location;u=y.protocol,o=o?o+"."+y.hostname:y.hostname,y=+y.port;var w=new nt(null);u&&Vn(w,u),o&&(w.g=o),y&&Mn(w,y),a&&(w.l=a),u=w}return a=r.D,o=r.ya,a&&o&&q(u,a,o),q(u,"VER",r.la),Zt(r,u),u}function Go(r,o,a){if(o&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return o=r.Ca&&!r.pa?new j(new Qt({eb:a})):new j(r.pa),o.Ha(r.J),o}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ko(){}n=Ko.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function jn(){}jn.prototype.g=function(r,o){return new ae(r,o)};function ae(r,o){X.call(this),this.g=new Mo(o),this.l=r,this.h=o&&o.messageUrlParams||null,r=o&&o.messageHeaders||null,o&&o.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.o=r,r=o&&o.initMessageHeaders||null,o&&o.messageContentType&&(r?r["X-WebChannel-Content-Type"]=o.messageContentType:r={"X-WebChannel-Content-Type":o.messageContentType}),o&&o.va&&(r?r["X-WebChannel-Client-Profile"]=o.va:r={"X-WebChannel-Client-Profile":o.va}),this.g.S=r,(r=o&&o.Sb)&&!K(r)&&(this.g.m=r),this.v=o&&o.supportsCrossDomainXhr||!1,this.u=o&&o.sendRawJson||!1,(o=o&&o.httpSessionIdParam)&&!K(o)&&(this.g.D=o,r=this.h,r!==null&&o in r&&(r=this.h,o in r&&delete r[o])),this.j=new It(this)}O(ae,X),ae.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ae.prototype.close=function(){ni(this.g)},ae.prototype.o=function(r){var o=this.g;if(typeof r=="string"){var a={};a.__data__=r,r=a}else this.u&&(a={},a.__data__=zr(r),r=a);o.i.push(new ml(o.Ya++,r)),o.G==3&&qn(o)},ae.prototype.N=function(){this.g.l=null,delete this.j,ni(this.g),delete this.g,ae.aa.N.call(this)};function Ho(r){Gr.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var o=r.__sm__;if(o){e:{for(let a in o){r=a;break e}r=void 0}(this.i=r)&&(r=this.i,o=o!==null&&r in o?o[r]:void 0),this.data=o}else this.data=r}O(Ho,Gr);function Qo(){Kr.call(this),this.status=1}O(Qo,Kr);function It(r){this.g=r}O(It,Ko),It.prototype.ua=function(){te(this.g,"a")},It.prototype.ta=function(r){te(this.g,new Ho(r))},It.prototype.sa=function(r){te(this.g,new Qo)},It.prototype.ra=function(){te(this.g,"b")},jn.prototype.createWebChannel=jn.prototype.g,ae.prototype.send=ae.prototype.o,ae.prototype.open=ae.prototype.m,ae.prototype.close=ae.prototype.close,uu=xe.createWebChannelTransport=function(){return new jn},cu=xe.getStatEventTarget=function(){return Dn()},au=xe.Event=et,ou=xe.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,su=xe.ErrorCode=Nn,lo.COMPLETE="complete",iu=xe.EventType=lo,so.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",X.prototype.listen=X.prototype.K,ru=xe.WebChannel=so,im=xe.FetchXmlHttpFactory=Qt,j.prototype.listenOnce=j.prototype.L,j.prototype.getLastError=j.prototype.Ka,j.prototype.getLastErrorCode=j.prototype.Ba,j.prototype.getStatus=j.prototype.Z,j.prototype.getResponseJson=j.prototype.Oa,j.prototype.getResponseText=j.prototype.oa,j.prototype.send=j.prototype.ea,j.prototype.setWithCredentials=j.prototype.Ha,nu=xe.XhrIo=j}).apply(typeof wr<"u"?wr:typeof self<"u"?self:typeof window<"u"?window:{});var lu="@firebase/firestore",hu="4.8.0";var Y=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Y.UNAUTHENTICATED=new Y(null),Y.GOOGLE_CREDENTIALS=new Y("google-credentials-uid"),Y.FIRST_PARTY=new Y("first-party-uid"),Y.MOCK_USER=new Y("mock-user");var bn="11.10.0";var Ot=new Ie("@firebase/firestore");function _e(n,...e){if(Ot.logLevel<=F.DEBUG){let t=e.map(Ws);Ot.debug(`Firestore (${bn}): ${n}`,...t)}}function Au(n,...e){if(Ot.logLevel<=F.ERROR){let t=e.map(Ws);Ot.error(`Firestore (${bn}): ${n}`,...t)}}function sm(n,...e){if(Ot.logLevel<=F.WARN){let t=e.map(Ws);Ot.warn(`Firestore (${bn}): ${n}`,...t)}}function Ws(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function se(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,bu(n,i,t)}function bu(n,e,t){let i=`FIRESTORE (${bn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Au(i),new Error(i)}function mt(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||bu(e,s,i)}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends ce{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Tr=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ss=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Y.UNAUTHENTICATED))}shutdown(){}},Ps=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Rs=class{constructor(e){this.t=e,this.currentUser=Y.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let i=this.i,s=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve(),c=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new gt,e.enqueueRetryable(()=>s(this.currentUser))};let l=()=>{let g=c;e.enqueueRetryable(()=>E(this,null,function*(){yield g.promise,yield s(this.currentUser)}))},f=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){let g=this.t.getImmediate({optional:!0});g?f(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new gt)}},0),l()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(mt(typeof i.accessToken=="string",31837,{l:i}),new Tr(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Y(e)}},Cs=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Y.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ks=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Cs(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Y.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ar=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ds=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,he(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);let i=c=>{c.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);let l=c.token!==this.m;return this.m=c.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};let s=c=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>s(c)),setTimeout(()=>{if(!this.appCheck){let c=this.V.getImmediate({optional:!0});c?s(c):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ar(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ar(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function om(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}function am(){return new TextEncoder}var Ns=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let s=om(40);for(let c=0;c<s.length;++c)i.length<20&&s[c]<t&&(i+=e.charAt(s[c]%62))}return i}};function de(n,e){return n<e?-1:n>e?1:0}function cm(n,e){let t=0;for(;t<n.length&&t<e.length;){let i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return de(i,s);{let c=am(),l=um(c.encode(du(n,t)),c.encode(du(e,t)));return l!==0?l:de(i,s)}}t+=i>65535?2:1}return de(n.length,e.length)}function du(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function um(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return de(n[t],e[t]);return de(n.length,e.length)}var fu="__name__",br=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&se(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&se(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let s=0;s<i;s++){let c=n.compareSegments(e.get(s),t.get(s));if(c!==0)return c}return de(e.length,t.length)}static compareSegments(e,t){let i=n.isNumericId(e),s=n.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?n.extractNumericId(e).compare(n.extractNumericId(t)):cm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}},Ve=class n extends br{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new x(M.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new n(t)}static emptyPath(){return new n([])}},lm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Os=class n extends br{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return lm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fu}static keyField(){return new n([fu])}static fromServerFormat(e){let t=[],i="",s=0,c=()=>{if(i.length===0)throw new x(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},l=!1;for(;s<e.length;){let f=e[s];if(f==="\\"){if(s+1===e.length)throw new x(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let g=e[s+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new x(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,s+=2}else f==="`"?(l=!l,s++):f!=="."||l?(i+=f,s++):(c(),s++)}if(c(),l)throw new x(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Me=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ve.fromString(e))}static fromName(e){return new n(Ve.fromString(e).popFirst(5))}static empty(){return new n(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ve(e.slice()))}};function hm(n,e,t,i){if(e===!0&&i===!0)throw new x(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dm(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function fm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":se(12329,{type:typeof n})}function pm(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=fm(n);throw new x(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function G(n,e){let t={typeString:n};return e&&(t.value=e),t}function Sn(n,e){if(!dm(n))throw new x(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let s=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}let l=n[i];if(s&&typeof l!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(c!==void 0&&l!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new x(M.INVALID_ARGUMENT,t);return!0}var pu=-62135596800,mu=1e6,vn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*mu);return new n(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pu)throw new x(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/mu}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sn(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-pu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};vn._jsonSchemaVersion="firestore/timestamp/1.0",vn._jsonSchema={type:G("string",vn._jsonSchemaVersion),seconds:G("number"),nanoseconds:G("number")};var xs=class{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}};xs.UNKNOWN_ID=-1;function mm(n){return n.name==="IndexedDbTransactionError"}function gm(n){return n===0&&1/n==-1/0}var _m="remoteDocuments",Su="owner";var Pu="mutationQueues";var Ru="mutations";var Cu="documentMutations",ym="remoteDocumentsV14";var ku="remoteDocumentGlobal";var Du="targets";var Nu="targetDocuments";var Ou="targetGlobal",xu="collectionParents";var Vu="clientMetadata";var Mu="bundles";var Lu="namedQueries";var vm="indexConfiguration";var Im="indexState";var Em="indexEntries";var Fu="documentOverlays";var wm="globals";var Tm=[Pu,Ru,Cu,_m,Du,Su,Ou,Nu,Vu,ku,xu,Mu,Lu],Ry=[...Tm,Fu],Am=[Pu,Ru,Cu,ym,Du,Su,Ou,Nu,Vu,ku,xu,Mu,Lu,Fu],bm=Am,Sm=[...bm,vm,Im,Em];var Cy=[...Sm,wm];var xt=class n{constructor(e,t){this.comparator=e,this.root=t||Ae.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ae.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ct(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ct(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ct(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ct(this.root,e,this.comparator,!0)}},Ct=class{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&s&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ae=class n{constructor(e,t,i,s,c){this.key=e,this.value=t,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=c??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,c){return new n(e??this.key,t??this.value,i??this.color,s??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this,c=i(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,t,i),null):c===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw se(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw se(27949);return e+(this.isRed()?0:1)}};Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1;Ae.EMPTY=new class{constructor(){this.size=0}get key(){throw se(57766)}get value(){throw se(16141)}get color(){throw se(16727)}get left(){throw se(29726)}get right(){throw se(36894)}copy(e,t,i,s,c){return this}insert(e,t,i){return new Ae(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Sr=class n{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pr(this.data.getIterator())}getIteratorFrom(e){return new Pr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let s=t.getNext().key,c=i.getNext().key;if(this.comparator(s,c)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Pr=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Vs=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Xe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(s){try{return atob(s)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Vs("Invalid base64 string: "+c):c}})(e);return new n(t)}static fromUint8Array(e){let t=(function(s){let c="";for(let l=0;l<s.length;++l)c+=String.fromCharCode(s[l]);return c})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xe.EMPTY_BYTE_STRING=new Xe("");var Pm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rm(n){if(mt(!!n,39018),typeof n=="string"){let e=0,t=Pm.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:In(n.seconds),nanos:In(n.nanos)}}function In(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cm(n){return typeof n=="string"?Xe.fromBase64String(n):Xe.fromUint8Array(n)}var Ms="(default)",Ls=class n{constructor(e,t){this.projectId=e,this.database=t||Ms}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Ms}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Uu="__type__",km="__max__";var Bu="__vector__",qu="value";function Dm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Uu])===null||t===void 0?void 0:t.stringValue)===Bu}function Nm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===km}var Dy={mapValue:{fields:{[Uu]:{stringValue:Bu},[qu]:{arrayValue:{}}}}};var Fs=class{constructor(e,t=null,i=[],s=[],c=null,l="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=c,this.limitType=l,this.startAt=f,this.endAt=g,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Om(n){return new Fs(n)}var Ny=new xt(Me.comparator);var Oy=new xt(Me.comparator);var xy=new xt(Me.comparator),Vy=new Sr(Me.comparator);var My=new Sr(de);var gu,V;(V=gu||(gu={}))[V.OK=0]="OK",V[V.CANCELLED=1]="CANCELLED",V[V.UNKNOWN=2]="UNKNOWN",V[V.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V[V.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V[V.NOT_FOUND=5]="NOT_FOUND",V[V.ALREADY_EXISTS=6]="ALREADY_EXISTS",V[V.PERMISSION_DENIED=7]="PERMISSION_DENIED",V[V.UNAUTHENTICATED=16]="UNAUTHENTICATED",V[V.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V[V.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V[V.ABORTED=10]="ABORTED",V[V.OUT_OF_RANGE=11]="OUT_OF_RANGE",V[V.UNIMPLEMENTED=12]="UNIMPLEMENTED",V[V.INTERNAL=13]="INTERNAL",V[V.UNAVAILABLE=14]="UNAVAILABLE",V[V.DATA_LOSS=15]="DATA_LOSS";var Ly=new Er([4294967295,4294967295],0);var Rr=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(In(e.integerValue));else if("doubleValue"in e){let i=In(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),gm(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=Rm(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Cm(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?Nm(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Dm(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):se(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let s of Object.keys(i))this.xt(s,t),this.Dt(i[s],t)}Lt(e,t){var i,s;let c=e.fields||{};this.Ct(t,53);let l=qu,f=((s=(i=c[l].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.length)||0;this.Ct(t,15),t.Ft(In(f)),this.xt(l,t),this.Dt(c[l],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let s of i)this.Dt(s,t)}Bt(e,t){this.Ct(t,37),Me.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Rr.Ut=new Rr;var Fy=new Uint8Array(0);var $u=41943040,Te=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Te.DEFAULT_COLLECTION_PERCENTILE=10,Te.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Te.DEFAULT=new Te($u,Te.DEFAULT_COLLECTION_PERCENTILE,Te.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Te.DISABLED=new Te(-1,0,0);var xm=1048576;function bs(){return typeof document<"u"?document:null}var Us=class{constructor(e,t,i=1e3,s=1.5,c=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=s,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-i);s>0&&_e("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Bs=class n{constructor(e,t,i,s,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=c,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,c){let l=Date.now()+i,f=new n(e,t,l,s,c);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var _u,yu;(yu=_u||(_u={})).Fa="default",yu.Cache="cache";function Vm(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vu=new Map;var ju="firestore.googleapis.com",Iu=!0,Cr=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new x(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ju,this.ssl=Iu}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Iu;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$u;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<xm)throw new x(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vm((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new x(M.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new x(M.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new x(M.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},kr=class{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cr({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cr(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Ss;switch(i.type){case"firstParty":return new ks(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new x(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=vu.get(t);i&&(_e("ComponentProvider","Removing Datastore"),vu.delete(t),i.terminate())})(this),Promise.resolve()}};function zu(n,e,t,i={}){var s;n=pm(n,kr);let c=st(e),l=n._getSettings(),f=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),g=`${e}:${t}`;c&&(Yn(`https://${g}`),Jn("Firestore",!0)),l.host!==ju&&l.host!==g&&sm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let T=Object.assign(Object.assign({},l),{host:g,ssl:c,emulatorOptions:i});if(!ve(T,f)&&(n._setSettings(T),i.mockUserToken)){let S,P;if(typeof i.mockUserToken=="string")S=i.mockUserToken,P=Y.MOCK_USER;else{S=ba(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);let A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new x(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Y(A)}n._authCredentials=new Ps(new Tr(S,P))}}var qs=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},_t=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Sn(t,n._jsonSchema))return new n(e,i||null,new Me(Ve.fromString(t.referencePath)))}};_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:G("string",_t._jsonSchemaVersion),referencePath:G("string")};var $s=class n extends qs{constructor(e,t,i){super(e,t,Om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Me(e))}withConverter(e){return new n(this.firestore,e,this._path)}};var Eu="AsyncQueue",Dr=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Us(this,"async_queue_retry"),this.oc=()=>{let i=bs();i&&_e(Eu,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=bs();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=bs();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new gt;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!mm(e))throw e;_e(Eu,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Au("INTERNAL UNHANDLED ERROR: ",wu(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let s=Bs.createAndSchedule(this,e,t,i,c=>this.lc(c));return this.ec.push(s),s}ac(){this.tc&&se(47125,{hc:wu(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function wu(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var js=class extends kr{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new Dr,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Dr(e),this._firestoreClient=void 0,yield e}})}};function Wu(n,e){let t=typeof n=="object"?n:at(),i=typeof n=="string"?n:e||Ms,s=At(t,"firestore").getImmediate({identifier:i});if(!s._initialized){let c=Aa("firestore");c&&zu(s,...c)}return s}var En=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Xe.fromBase64String(e))}catch(t){throw new x(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sn(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};En._jsonSchemaVersion="firestore/bytes/1.0",En._jsonSchema={type:G("string",En._jsonSchemaVersion),bytes:G("string")};var Nr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Os(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wn=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Sn(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:G("string",wn._jsonSchemaVersion),latitude:G("number"),longitude:G("number")};var Tn=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==s[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sn(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new x(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Tn._jsonSchemaVersion="firestore/vectorValue/1.0",Tn._jsonSchema={type:G("string",Tn._jsonSchemaVersion),vectorValues:G("object")};var Mm=new RegExp("[~\\*/\\[\\]]");function Lm(n,e,t){if(e.search(Mm)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nr(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tu(n,e,t,i,s){let c=i&&!i.isEmpty(),l=s!==void 0,f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(c||l)&&(g+=" (found",c&&(g+=` in field ${i}`),l&&(g+=` in document ${s}`),g+=")"),new x(M.INVALID_ARGUMENT,f+n+g)}var Or=class{constructor(e,t,i,s,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zs(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Gu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zs=class extends Or{data(){return super.data()}};function Gu(n,e){return typeof e=="string"?Lm(n,e):e instanceof Nr?e._internalPath:e._delegate._internalPath}var kt=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Dt=class n extends Or{constructor(e,t,i,s,c,l){super(e,t,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Nt(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Gu("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Dt._jsonSchemaVersion="firestore/documentSnapshot/1.0",Dt._jsonSchema={type:G("string",Dt._jsonSchemaVersion),bundleSource:G("string","DocumentSnapshot"),bundleName:G("string"),bundle:G("string")};var Nt=class extends Dt{data(e={}){return super.data(e)}},An=class n{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new kt(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Nt(this._firestore,this._userDataWriter,i.key,i,new kt(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,c){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(f=>{let g=new Nt(s._firestore,s._userDataWriter,f.doc.key,f.doc,new kt(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>c||f.type!==3).map(f=>{let g=new Nt(s._firestore,s._userDataWriter,f.doc.key,f.doc,new kt(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),T=-1,S=-1;return f.type!==0&&(T=l.indexOf(f.doc.key),l=l.delete(f.doc.key)),f.type!==1&&(l=l.add(f.doc),S=l.indexOf(f.doc.key)),{type:Fm(f.type),doc:g,oldIndex:T,newIndex:S}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ns.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],s=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),s.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Fm(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se(61501,{type:n})}}An._jsonSchemaVersion="firestore/querySnapshot/1.0",An._jsonSchema={type:G("string",An._jsonSchemaVersion),bundleSource:G("string","QuerySnapshot"),bundleName:G("string"),bundle:G("string")};(function(e,t=!0){(function(s){bn=s})(ze),me(new re("firestore",(i,{instanceIdentifier:s,options:c})=>{let l=i.getProvider("app").getImmediate(),f=new js(new Rs(i.getProvider("auth-internal")),new Ds(l,i.getProvider("app-check-internal")),(function(T,S){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new x(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(T.options.projectId,S)})(l,s),l);return c=Object.assign({useFetchStreams:t},c),f._setSettings(c),f},"PUBLIC").setMultipleInstances(!0)),z(lu,hu,e),z(lu,hu,"esm2017")})();var Pn=class{constructor(e){return e}},Ku="firestore",Gs=class{constructor(){return St(Ku)}};var Ks=new wt("angularfire2.firestore-instances");function Um(n,e){let t=cn(Ku,n,e);return t&&new Pn(t)}function Bm(n){return(e,t)=>{let i=e.runOutsideAngular(()=>n(t));return new Pn(i)}}var qm={provide:Gs,deps:[[new le,Ks]]},$m={provide:Pn,useFactory:Um,deps:[[new le,Ks],De]};function Hu(n,...e){return z("angularfire",We.full,"fst"),Tt([$m,qm,{provide:Ks,useFactory:Bm(n),multi:!0,deps:[ye,$e,Ge,lt,[new le,yn],[new le,Pt],...e]}])}var Qu=ut(Wu,!0);var Yu=[{path:"",loadComponent:()=>import("./chunk-UDOWWBSR.js").then(n=>n.HomeComponent)},{path:"about",loadComponent:()=>import("./chunk-M6URBA36.js").then(n=>n.AboutComponent)},{path:"book/:id",loadComponent:()=>import("./chunk-423PMAIC.js").then(n=>n.BookDetailComponent)},{path:"**",redirectTo:""}];var Ju={apiKey:"AIzaSyDyKVukCH7vowsj4ef4e_xlvUkDR2XQE1A",authDomain:"litverse-4bfx4.firebaseapp.com",projectId:"litverse-4bfx4",storageBucket:"litverse-4bfx4.firebasestorage.app",messagingSenderId:"435690538600",appId:"1:435690538600:web:4203fc33292e261b0bdddd"};var Xu={providers:[ta(),aa({eventCoalescing:!0}),ya(Yu),Ja(()=>Xa(Ju)),Hu(()=>Qu()),Jc(()=>Xc())]};var jm=()=>({exact:!0});function zm(n,e){n&1&&(C(0,"section",32)(1,"div",33),Kn(2,"div",34),C(3,"div",35)(4,"div",36),D(5,"\u2600\uFE0F"),k(),C(6,"div",37),D(7,"\u{1F989}"),k(),C(8,"div",38),D(9,"\u26A1"),k(),C(10,"div",39),D(11,"\u{1F3AD}"),k()()(),C(12,"div",40)(13,"div",41)(14,"h2",42),D(15,"50 Profoundly Influential Books"),k(),C(16,"p",43),D(17," Discover the literary works that have shaped human civilization. From ancient philosophy to sacred texts, explore the ideas that illuminate our world. "),k(),C(18,"div",44)(19,"div",45)(20,"span",46),D(21,"50"),k(),C(22,"span",47),D(23,"Influential Works"),k()(),C(24,"div",45)(25,"span",46),D(26,"2400+"),k(),C(27,"span",47),D(28,"Years of Wisdom"),k()(),C(29,"div",45)(30,"span",46),D(31,"\u221E"),k(),C(32,"span",47),D(33,"Impact"),k()()()(),C(34,"div",48)(35,"div",49)(36,"div",50),D(37,"The Republic"),k(),C(38,"div",51),D(39,"The Bible"),k(),C(40,"div",52),D(41,"Divine Comedy"),k(),C(42,"div",53),D(43,"The Odyssey"),k()()()()())}var xr=class n{constructor(e){this.router=e}title="Macknight Publications";ngOnInit(){document.body.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme","dark"),this.router.events.pipe(Xo(e=>e instanceof fa)).subscribe(()=>{setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"instant"}),document.documentElement.scrollTop=0,document.body.scrollTop=0},0)})}static \u0275fac=function(t){return new(t||n)(ra(ma))};static \u0275cmp=ia({type:n,selectors:[["app-root"]],decls:80,vars:3,consts:[[1,"app-container"],[1,"main-header"],[1,"header-content"],[1,"brand-section"],[1,"brand-icon"],[1,"brand-info"],[1,"brand-title"],[1,"brand-subtitle"],[1,"main-nav"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/about","routerLinkActive","active",1,"nav-link"],[1,"header-actions"],["class","hero-section",4,"ngIf"],[1,"main-content"],["id","about",1,"main-footer"],[1,"footer-content"],[1,"footer-section","brand-section"],[1,"footer-brand"],[1,"footer-description"],[1,"footer-section"],[1,"footer-links"],["href","#philosophy"],["href","#religion"],["href","#classics"],["href","#poetry"],["href","#infographics"],["href","#audio"],["href","#video"],["href","#analysis"],[1,"contact-info"],["href","mailto:michael@macknightpublications.org"],[1,"copyright"],[1,"hero-section"],[1,"hero-background"],[1,"hero-particles"],[1,"mythological-elements"],[1,"element","apollo"],[1,"element","athena"],[1,"element","hermes"],[1,"element","muse"],[1,"hero-content"],[1,"hero-text"],[1,"hero-title"],[1,"hero-description"],[1,"hero-stats"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[1,"hero-visual"],[1,"floating-books"],[1,"book-spine","book-1"],[1,"book-spine","book-2"],[1,"book-spine","book-3"],[1,"book-spine","book-4"]],template:function(t,i){t&1&&(C(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4),D(5,"\u{1F4DA}"),k(),C(6,"div",5)(7,"h1",6),D(8,"Macknight Publications"),k(),C(9,"p",7),D(10,"Digital Light in a Darkening World"),k()()(),C(11,"nav",8)(12,"a",9),D(13," Collection "),k(),C(14,"a",10),D(15,"About"),k()(),Kn(16,"div",11),k()(),sa(17,zm,44,0,"section",12),C(18,"main",13),Kn(19,"router-outlet"),k(),C(20,"footer",14)(21,"div",15)(22,"div",16)(23,"div",17)(24,"div",4),D(25,"\u{1F4DA}"),k(),C(26,"div",5)(27,"h3"),D(28,"MacKnight Publications"),k(),C(29,"p"),D(30,"Digital Light in a Darkening World"),k()()(),C(31,"p",18),D(32," In our digital age overwhelmed by fleeting content and endless noise, MacKnight Publications stands as a beacon of enduring wisdom. We believe that in this flood of darkness, one must turn to the classics - the timeless works that have guided humanity through its greatest challenges and triumphs. "),k(),C(33,"p",18),D(34," Through interactive experiences and scholarly analysis, we illuminate the 50 most influential books ever written, preserving their wisdom for future generations. "),k()(),C(35,"div",19)(36,"h4"),D(37,"Literary Heritage"),k(),C(38,"ul",20)(39,"li")(40,"a",21),D(41,"Ancient Philosophy"),k()(),C(42,"li")(43,"a",22),D(44,"Sacred Texts"),k()(),C(45,"li")(46,"a",23),D(47,"Classical Literature"),k()(),C(48,"li")(49,"a",24),D(50,"The Classics"),k()()()(),C(51,"div",19)(52,"h4"),D(53,"Features"),k(),C(54,"ul",20)(55,"li")(56,"a",25),D(57,"Interactive Infographics"),k()(),C(58,"li")(59,"a",26),D(60,"Audio Content"),k()(),C(61,"li")(62,"a",27),D(63,"Video Analysis"),k()(),C(64,"li")(65,"a",28),D(66,"Book Analysis"),k()()()(),C(67,"div",19)(68,"h4"),D(69,"Contact"),k(),C(70,"div",29)(71,"p")(72,"strong"),D(73,"Michael Allen Ackerman"),k()(),C(74,"p"),D(75,"\u{1F4E7} "),C(76,"a",30),D(77,"michael@macknightpublications.org"),k()()(),C(78,"p",31),D(79," Copyright \xA9 2025 MacKnight Publications. Preserving wisdom for future generations. "),k()()()()()),t&2&&(hi(12),di("routerLinkActiveOptions",oa(2,jm)),hi(5),di("ngIf",i.router.url==="/"))},dependencies:[ha,la,pa,va,ga,_a],styles:["[_nghost-%COMP%]{display:block;width:100%;min-height:100vh}[_ngcontent-%COMP%]:root{--primary-bg: #2c3e50;--secondary-bg: #34495e;--accent-gold: #f39c12;--accent-brown: #e67e22;--text-primary: #ecf0f1;--text-secondary: #bdc3c7;--border-color: #52708a}.app-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,var(--primary-bg) 0%,var(--secondary-bg) 100%);color:var(--text-primary);font-family:Georgia,serif;transition:all .3s ease}.main-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-brown) 0%,var(--accent-gold) 100%);color:#fff;padding:16px 0;position:sticky;top:0;z-index:100;box-shadow:0 4px 12px #00000026}.header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:20px}.brand-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.brand-icon[_ngcontent-%COMP%]{font-size:2.5rem;animation:_ngcontent-%COMP%_glow 2s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_glow{0%{text-shadow:0 0 5px rgba(255,255,255,.3)}to{text-shadow:0 0 20px rgba(255,255,255,.6),0 0 30px rgba(218,165,32,.4)}}.brand-title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:900;font-family:Playfair Display,Georgia,serif;margin:0;text-shadow:2px 2px 4px rgba(0,0,0,.3);line-height:1.2;letter-spacing:-.5px}.brand-subtitle[_ngcontent-%COMP%]{font-size:.9rem;margin:0;font-style:italic;opacity:.9;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.main-nav[_ngcontent-%COMP%]{display:flex;gap:30px;align-items:center}.nav-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:1.1rem;font-weight:500;padding:8px 16px;border-radius:25px;transition:all .3s ease;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.nav-link[_ngcontent-%COMP%]:hover, .nav-link.active[_ngcontent-%COMP%]{background:#fff3;transform:translateY(-2px)}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.hero-section[_ngcontent-%COMP%]{position:relative;min-height:70vh;display:flex;align-items:center;overflow:hidden}.hero-background[_ngcontent-%COMP%]{position:absolute;inset:0;background:radial-gradient(circle at 20% 20%,rgba(218,165,32,.1) 0%,transparent 50%),radial-gradient(circle at 80% 80%,rgba(139,69,19,.1) 0%,transparent 50%),linear-gradient(135deg,var(--primary-bg) 0%,var(--secondary-bg) 100%)}.hero-particles[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:radial-gradient(2px 2px at 20px 30px,rgba(218,165,32,.3),transparent),radial-gradient(2px 2px at 40px 70px,rgba(139,69,19,.2),transparent),radial-gradient(1px 1px at 90px 40px,rgba(218,165,32,.4),transparent);background-repeat:repeat;background-size:200px 100px;animation:_ngcontent-%COMP%_sparkle 4s linear infinite}@keyframes _ngcontent-%COMP%_sparkle{0%{transform:translate(0)}to{transform:translate(200px)}}.mythological-elements[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;overflow:hidden}.element[_ngcontent-%COMP%]{position:absolute;font-size:2rem;opacity:.1;animation:_ngcontent-%COMP%_float 6s ease-in-out infinite}.apollo[_ngcontent-%COMP%]{top:20%;left:10%;animation-delay:0s}.athena[_ngcontent-%COMP%]{top:60%;right:15%;animation-delay:1.5s}.hermes[_ngcontent-%COMP%]{top:30%;right:30%;animation-delay:3s}.muse[_ngcontent-%COMP%]{bottom:25%;left:20%;animation-delay:4.5s}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}25%{transform:translateY(-20px) rotate(5deg)}50%{transform:translateY(-10px) rotate(-3deg)}75%{transform:translateY(-15px) rotate(2deg)}}.hero-content[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:60px 20px;display:grid;grid-template-columns:1fr 1fr;gap:60px;align-items:center}.hero-title[_ngcontent-%COMP%]{font-size:5.5rem;font-weight:900;font-family:Playfair Display,Georgia,serif;margin-bottom:24px;background:linear-gradient(135deg,gold,orange,tomato);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:3px 3px 6px rgba(0,0,0,.2);line-height:1.1;letter-spacing:-2px;animation:_ngcontent-%COMP%_titlePulse 3s ease-in-out infinite alternate}@keyframes _ngcontent-%COMP%_titlePulse{0%{transform:scale(1);filter:brightness(1)}to{transform:scale(1.02);filter:brightness(1.2)}}.hero-description[_ngcontent-%COMP%]{font-size:1.8rem;font-family:Poppins,Crimson Text,serif;font-weight:400;letter-spacing:.5px;line-height:1.6;margin-bottom:40px;color:var(--text-secondary)}.hero-stats[_ngcontent-%COMP%]{display:flex;gap:40px;margin-top:20px}.stat-item[_ngcontent-%COMP%]{text-align:center}.stat-number[_ngcontent-%COMP%]{display:block;font-size:2.5rem;font-weight:700;color:var(--accent-gold);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:1px}.hero-visual[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.floating-books[_ngcontent-%COMP%]{position:relative;width:300px;height:300px}.book-spine[_ngcontent-%COMP%]{position:absolute;width:40px;height:180px;background:linear-gradient(135deg,var(--accent-brown),var(--accent-gold));writing-mode:vertical-lr;text-orientation:mixed;display:flex;align-items:center;justify-content:center;font-size:.8rem;color:#fff;font-weight:700;border-radius:4px;box-shadow:0 8px 16px #0003;animation:_ngcontent-%COMP%_bookFloat 4s ease-in-out infinite}.book-1[_ngcontent-%COMP%]{top:20px;left:50px;animation-delay:0s}.book-2[_ngcontent-%COMP%]{top:60px;right:30px;animation-delay:1s}.book-3[_ngcontent-%COMP%]{bottom:60px;left:30px;animation-delay:2s}.book-4[_ngcontent-%COMP%]{bottom:20px;right:50px;animation-delay:3s}@keyframes _ngcontent-%COMP%_bookFloat{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(2deg)}}.main-content[_ngcontent-%COMP%]{min-height:60vh;padding:40px 0}.main-footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--accent-brown) 0%,#654321 100%);color:#fff;padding:60px 0 30px;margin-top:80px}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 20px;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px}.footer-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .footer-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--accent-gold)}.footer-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:20px}.footer-brand[_ngcontent-%COMP%]   .brand-icon[_ngcontent-%COMP%]{font-size:2rem}.footer-description[_ngcontent-%COMP%]{line-height:1.6;opacity:.9;margin-bottom:20px}.footer-links[_ngcontent-%COMP%]{list-style:none;padding:0}.footer-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;transition:color .3s ease}.footer-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--accent-gold)}.social-links[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px}.social-link[_ngcontent-%COMP%]{display:inline-block;font-size:1.5rem;text-decoration:none;transition:transform .3s ease}.social-link[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.copyright[_ngcontent-%COMP%]{font-size:.9rem;opacity:.7;margin:0}@media (max-width: 1024px){.hero-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:40px;text-align:center}.hero-title[_ngcontent-%COMP%]{font-size:2.8rem}.footer-content[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:30px}}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}.main-nav[_ngcontent-%COMP%]{gap:20px}.hero-title[_ngcontent-%COMP%]{font-size:2.2rem}.hero-description[_ngcontent-%COMP%]{font-size:1.1rem}.hero-stats[_ngcontent-%COMP%]{justify-content:center;gap:30px}.stat-number[_ngcontent-%COMP%]{font-size:2rem}.footer-content[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:30px;text-align:center}}@media (max-width: 480px){.brand-title[_ngcontent-%COMP%]{font-size:1.4rem}.brand-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.hero-title[_ngcontent-%COMP%]{font-size:1.8rem}.hero-stats[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.floating-books[_ngcontent-%COMP%]{width:250px;height:250px}.book-spine[_ngcontent-%COMP%]{width:30px;height:140px;font-size:.7rem}}"]})};da(xr,Xu).catch(n=>console.error(n));
